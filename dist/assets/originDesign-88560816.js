import{_ as pe,u as fe,q as _e,e as n,h as re,s as ge,r as d,o as _,c as M,a as u,b as l,w as a,k as m,F as Z,x as I,z as P,A as me,t as ne,y as S,p as ye,d as he,W as ve,l as we,X as Ve}from"./index-d420b9fe.js";import{o as ee}from"./originDesign-9e44b338.js";import{d as le}from"./document-1fa91d60.js";import"./FileSaver.min-f6114a76.js";import"./index-41c3c3d0.js";import"./editor.vue_vue_type_style_index_0_lang-75fb86dc.js";const ke="/assets/logo-228fc9ef.webp";const De=N=>(ye("data-v-ea4b5ea6"),N=N(),he(),N),$e={class:"right"},Ce={class:"button-container"},je={key:0},Ne=["onClick"],Ae=["onClick"],Me={class:"project-name"},Ue={class:"project-actions"},Re={class:"dialog-footer"},Se={class:"dialog-footer"},Fe={class:"dialog-footer"},ze={class:"dialog-footer"},Te={key:1},Pe=["onClick"],xe={class:"project-name"},Be=De(()=>u("div",{class:"project-actions"},null,-1)),Le={class:"dialog-footer"},q=4,qe={__name:"documentShow",setup(N){const E=fe();_e(new Date);const v=n(""),x=n([]);n([]);const $=n(),h=n(),D=n([]),b=n([]),f=n([]),W=re(()=>Math.ceil($.value/q)),G=re(()=>Math.ceil(h.value/q)),U=n(!1),R=n(!1),p=n(!1),g=n(),F=n(!0),C=n(-1);n(!1);const y=n([]),J=n([]),B=n([]),j=n([]);n([]),n();async function z(){console.log("11111111111111111111111111111");const o=await le.createFolder(v.value,S());console.log("addFolder",o.data),await Y(),se()}async function O(){const o=await le.createDocument(S(),v.value,null);console.log("addDocument",o.data),await Y(),se()}const X=n(),H=n();async function K(){const o=await le.createDocument(S(),v.value,g.value);console.log("addDocument2",o.data);let e=[];X.value=o.data.id,H.value=o.data.folder,y.value.push({id:o.data.id,name:o.data.title,folder:o.data.folder});for(let t=0;t<y.value.length;t++)y.value[t].folder===g.value&&e.push({id:y.value[t].id,name:y.value[t].name});j.value=e,console.log("secondDoc.value",j.value),console.log("documentArray",y.value),de()}function oe(){v.value="",U.value=!0}function ae(){v.value="",R.value=!0,p.value=!0}async function Q(o){let e=[];if(console.log("projPos111",o),console.log("myResult!!!!!",f.value),h.value===o+1)await E.push(`/document/${X.value}`);else{for(let i=0;i<f.value.length;i++)if(f.value[i].id===H.value){e=f.value[i].documents;break}console.log("myResult.value",f.value),console.log("temp_folder",e);let t=e[o].id;await E.push(`/document/${t}`)}}async function te(o){g.value=f.value[o].id,F.value=!1;let e=[];for(let t=0;t<y.value.length;t++)y.value[t].folder===g.value&&e.push({id:y.value[t].id,name:y.value[t].name});j.value=e,F.value=!1,de()}function L(){U.value=!1}function T(){R.value=!1}function k(){p.value=!1}async function Y(){const o=await le.getAllDocuments(S());console.log("getData",o);let e=[];for(let s=0;s<o.data.length;s++)o.data[s].folder===void 0?e.push({id:o.data[s].id,name:o.data[s].name,type:1}):e.push({id:o.data[s].id,name:o.data[s].title,type:0});B.value=e;let t=[],i=[];for(let s=0;s<o.data.length;s++)if(o.data[s].folder===null)t.push({id:o.data[s].id,name:o.data[s].title,folder:o.data[s].folder});else if(o.data[s].folder===void 0){i.push({id:o.data[s].id,name:o.data[s].name});for(let A=0;A<o.data[s].documents.length;A++)console.log("result.data[i].documents",o.data[s].documents[A]),t.push({id:o.data[s].documents[A].id,name:o.data[s].documents[A].title,folder:o.data[s].documents[A].folder})}y.value=t,J.value=i,console.log("firstDoc.value",B.value),console.log("folderArray.value",J.value),console.log("documentArray.value",y.value),f.value=o.data}function se(){D.value=[];let o=[];for(const e of B.value)o.push(e.name);x.value=o,$.value=o.length,console.log("numRows",W.value);for(let e=0;e<W.value;e++){let t=[];for(let i=0;i<q;i++){let s=e*q+i;s<$.value&&t.push(s)}D.value.push(t),console.log("rows",D)}console.log($.value)}const ue=n([]);function de(){b.value=[];let o=[];console.log("secondDoc.value",j.value);for(const e of j.value)o.push(e.name);console.log("docsNames",o),ue.value=o,h.value=o.length,console.log("numRows1",G.value);for(let e=0;e<G.value;e++){let t=[];for(let i=0;i<q;i++){let s=e*q+i;s<h.value&&t.push(s)}b.value.push(t),console.log("rows1",b)}console.log(h.value)}return ge(async()=>{await Y(),se(),console.log("$$$$$$$$$$",$.value)}),(o,e)=>{const t=d("el-button"),i=d("el-input"),s=d("el-dialog"),A=d("el-card"),ie=d("el-col"),ce=d("el-row");return _(),M("div",$e,[u("div",Ce,[l(t,{onClick:oe,class:"custom-button"},{default:a(()=>[m(" 新建文件夹 ")]),_:1}),l(t,{onClick:ae,class:"custom-button"},{default:a(()=>[m(" 新建文件 ")]),_:1})]),F.value?(_(),M("div",je,[(_(!0),M(Z,null,I(D.value,(c,w)=>(_(),P(ce,{key:w,class:"card-row"},{default:a(()=>[(_(!0),M(Z,null,I(c,(be,V)=>(_(),P(ie,{key:V,span:4,class:"card-col"},{default:a(()=>[l(A,{onMouseover:r=>C.value=w*4+V,onMouseleave:e[6]||(e[6]=r=>C.value=-1),shadow:"hover","body-style":{padding:"0px"},class:"small-card"},{default:a(()=>[B.value.filter(r=>r.id===f.value[w*4+V].id)[0].type===0?(_(),M("img",{key:0,onClick:r=>Q(w*4+V),src:"https://pic1.zhimg.com/v2-65354520edd978c49d00a7a710feb9c5_r.jpg?source=1940ef5c",class:"image"},null,8,Ne)):(_(),M("img",{key:1,src:"https://img2.baidu.com/it/u=4238855641,2359345742&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=1083",onClick:r=>te(w*4+V),class:"image"},null,8,Ae)),u("div",{class:me(["project-info",{active:C.value===w*4+V}])},[u("div",Me,[u("span",null,ne(x.value[w*4+V]),1),u("div",Ue,[l(s,{modelValue:U.value,"onUpdate:modelValue":e[2]||(e[2]=r=>U.value=r),title:"新建文件夹",class:"project-dialog"},{default:a(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=r=>v.value=r),placeholder:"文件夹名称",class:"input-field"},null,8,["modelValue"]),u("span",Re,[l(t,{type:"primary",onClick:e[1]||(e[1]=r=>{z(),L()}),class:"confirm-button"},{default:a(()=>[m("确认")]),_:1}),l(t,{onClick:L,class:"cancel-button"},{default:a(()=>[m("取消")]),_:1})])]),_:1},8,["modelValue"]),l(s,{modelValue:R.value,"onUpdate:modelValue":e[5]||(e[5]=r=>R.value=r),title:"新建文档",class:"project-dialog"},{default:a(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=r=>v.value=r),placeholder:"文档名称",class:"input-field"},null,8,["modelValue"]),u("span",Se,[l(t,{type:"primary",onClick:e[4]||(e[4]=r=>{O(),T()}),class:"confirm-button"},{default:a(()=>[m("确认")]),_:1}),l(t,{onClick:T,class:"cancel-button"},{default:a(()=>[m("取消")]),_:1})])]),_:1},8,["modelValue"])])])],2)]),_:2},1032,["onMouseover"])]),_:2},1024))),128))]),_:2},1024))),128)),l(s,{modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=c=>U.value=c),title:"新建文件夹",class:"project-dialog"},{default:a(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=c=>v.value=c),placeholder:"文件夹名称",class:"input-field"},null,8,["modelValue"]),u("span",Fe,[l(t,{type:"primary",onClick:e[8]||(e[8]=c=>{z(),L()}),class:"confirm-button"},{default:a(()=>[m("确认")]),_:1}),l(t,{onClick:L,class:"cancel-button"},{default:a(()=>[m("取消")]),_:1})])]),_:1},8,["modelValue"]),l(s,{modelValue:R.value,"onUpdate:modelValue":e[12]||(e[12]=c=>R.value=c),title:"新建文档",class:"project-dialog"},{default:a(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=c=>v.value=c),placeholder:"文档名称",class:"input-field"},null,8,["modelValue"]),u("span",ze,[l(t,{type:"primary",onClick:e[11]||(e[11]=c=>{O(),T()}),class:"confirm-button"},{default:a(()=>[m("确认")]),_:1}),l(t,{onClick:T,class:"cancel-button"},{default:a(()=>[m("取消")]),_:1})])]),_:1},8,["modelValue"])])):(_(),M("div",Te,[(_(!0),M(Z,null,I(b.value,(c,w)=>(_(),P(ce,{key:w,class:"card-row"},{default:a(()=>[(_(!0),M(Z,null,I(c,(be,V)=>(_(),P(ie,{key:V,span:4,class:"card-col"},{default:a(()=>[l(A,{onMouseover:r=>C.value=w*4+V,onMouseleave:e[13]||(e[13]=r=>C.value=-1),shadow:"hover","body-style":{padding:"0px"},class:"small-card"},{default:a(()=>[u("img",{onClick:r=>Q(w*4+V),src:"https://pic1.zhimg.com/v2-65354520edd978c49d00a7a710feb9c5_r.jpg?source=1940ef5c",class:"image"},null,8,Pe),u("div",{class:me(["project-info",{active:C.value===w*4+V}])},[u("div",xe,[u("span",null,ne(ue.value[w*4+V]),1),Be])],2)]),_:2},1032,["onMouseover"])]),_:2},1024))),128))]),_:2},1024))),128)),l(s,{modelValue:p.value,"onUpdate:modelValue":e[16]||(e[16]=c=>p.value=c),title:"新建文档",class:"project-dialog"},{default:a(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":e[14]||(e[14]=c=>v.value=c),placeholder:"文档名称",class:"input-field"},null,8,["modelValue"]),u("span",Le,[l(t,{type:"primary",onClick:e[15]||(e[15]=c=>{K(),k()}),class:"confirm-button"},{default:a(()=>[m("确认")]),_:1}),l(t,{onClick:k,class:"cancel-button"},{default:a(()=>[m("取消")]),_:1})])]),_:1},8,["modelValue"])]))])}}},Ee=pe(qe,[["__scopeId","data-v-ea4b5ea6"]]);const We=N=>(ye("data-v-af1a2a0a"),N=N(),he(),N),Ge=We(()=>u("div",{class:"logo"},[u("img",{src:ke,alt:"Logo"})],-1)),Je={class:"menu-item-container"},Oe={class:"element-title"},Xe={class:"menu-item-container-2"},He={class:"menu-item-container"},Ke={class:"dialog-footer"},Qe="140px",Ye={__name:"originDesign",setup(N){const E=fe(),v=_e({name:"",describe:""}),x=n(!0),$=n("");$.value=ve(),n(!1);const h=n(!1),D=n([]),b=n(),f=n("");function W(){x.value=!1}function G(){x.value=!0}function U(p){Ve(p),console.log("designId",p),E.push("/drag"),console.log("11111111")}async function R(){if(console.log("ifTemplate",f.value),f.value==="1")if(console.log("ifTemplate1",f.value),b.value==="")h.value=!0;else{await ee.addOrigin(b.value,S()),console.log("designName",b.value),D.value.push({name:b.value}),h.value=!1;const p=await ee.getAllDesign(S());D.value=p.data}else if(f.value==="2"){console.log("ifTemplate2",f.value),console.log("designName",b.value),D.value.push({name:b.value}),h.value=!1;const p=await ee.getAllDesign(S());D.value=p.data,await E.push("/origin/template"),h.value=!1}}return ge(async()=>{const p=await ee.getAllDesign(S());D.value=p.data,$.value=ve(),console.log("projName",$.value),console.log("result",p),console.log("result.data",p.data),console.log("result.data.data",p.data.data),console.log("onMounted")}),(p,g)=>{const F=d("font-awesome-icon"),C=d("el-menu-item"),y=d("el-divider"),J=d("el-menu"),B=d("el-aside"),j=d("el-table-column"),z=d("el-button"),O=d("el-table"),X=d("el-input"),H=d("el-form-item"),K=d("el-radio"),oe=d("el-radio-group"),ae=d("el-form"),Q=d("el-dialog"),te=d("el-scrollbar"),L=d("el-main"),T=d("el-container");return _(),P(T,{class:"layout-container-demo",style:{height:"800px"}},{default:a(()=>[l(B,{width:"300px",class:"custom-aside"},{default:a(()=>[Ge,l(J,{"default-active":"2",class:"element-back"},{default:a(()=>[l(C,{index:"1"},{default:a(()=>[u("div",Je,[l(F,{icon:["fas","signature"],style:{color:"#5683d2"}}),u("span",Oe,"项目名称："+ne($.value),1)])]),_:1}),l(y),l(C,{index:"2"},{default:a(()=>[u("div",Xe,[l(F,{icon:["fas","file-invoice"],style:{color:"#5587dd"}}),u("span",{class:"element-title",onClick:W},"项目文档")])]),_:1}),l(y),l(C,{index:"4"},{default:a(()=>[u("div",He,[l(F,{icon:["fas","eye"],style:{color:"#5587dd"}}),u("span",{class:"element-title",onClick:G},"页面视图")])]),_:1})]),_:1})]),_:1}),l(T,null,{default:a(()=>[l(L,{style:{height:"100%"}},{default:a(()=>[x.value===!1?(_(),P(Ee,{key:0})):(_(),P(te,{key:1,style:{height:"100%"}},{default:a(()=>[l(O,{data:D.value,style:{width:"100%",height:"100%"},"max-height":"600"},{default:a(()=>[l(j,{prop:"created_time",label:"创建时间"}),l(j,{prop:"title",label:"画布名称"}),l(j,{prop:"update_time",label:"更新时间"}),l(j,{fixed:"right",label:"操作",width:"120"},{default:a(k=>[l(z,{link:"",type:"primary",size:"small",onClick:we(Y=>U(k.row.id),["prevent"])},{default:a(()=>[m(" 进入画布 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(z,{class:"mt-4",style:{"margin-right":"8px","margin-top":"0px",width:"100%"},onClick:g[0]||(g[0]=k=>h.value=!0)},{default:a(()=>[m("新建画布")]),_:1}),l(Q,{draggable:"true",modelValue:h.value,"onUpdate:modelValue":g[4]||(g[4]=k=>h.value=k),title:"新建画布:",center:"",width:"30%"},{footer:a(()=>[u("span",Ke,[l(z,{onClick:g[3]||(g[3]=k=>h.value=!1)},{default:a(()=>[m(" 取消 ")]),_:1}),l(z,{type:"primary",onClick:R},{default:a(()=>[m(" 确定 ")]),_:1})])]),default:a(()=>[l(ae,{model:v},{default:a(()=>[l(H,{label:"画布名称","label-width":Qe},{default:a(()=>[l(X,{modelValue:b.value,"onUpdate:modelValue":g[1]||(g[1]=k=>b.value=k),autocomplete:"off",class:"element-form"},null,8,["modelValue"])]),_:1}),l(oe,{modelValue:f.value,"onUpdate:modelValue":g[2]||(g[2]=k=>f.value=k)},{default:a(()=>[l(K,{label:"1",size:"large"},{default:a(()=>[m("不使用模板")]),_:1}),l(K,{label:"2",size:"large"},{default:a(()=>[m("使用模板")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))]),_:1})]),_:1})]),_:1})}}},tl=pe(Ye,[["__scopeId","data-v-af1a2a0a"]]);export{tl as default};
