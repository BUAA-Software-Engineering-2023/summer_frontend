import{_ as x,u as I,q as ee,e as l,h as ae,s as oe,r as f,o as m,c as h,b as u,w as c,F as U,x as z,y as A,k as p,z as q,a as _,t as le,A as te,B as se}from"./index-d420b9fe.js";import{p as ne}from"./proj-96266823.js";import{d as F}from"./document-1fa91d60.js";const ue=["onClick"],ce=["onClick"],de={class:"project-name"},ie={class:"project-actions"},re={class:"dialog-footer"},me={class:"dialog-footer"},P=4,ve={__name:"myTest",setup(fe){const E=I();ee(new Date);const d=l(""),M=l([]),S=l([]);l([]);const g=l(),w=l([]),k=l([]),N=ae(()=>Math.ceil(g.value/P)),D=l(!1),V=l(!1),G=l(!0),j=l(-1);l(!1);const v=l([]),R=l([]),$=l([]),J=l([]);l([]),l();async function L(){console.log("11111111111111111111111111111");const e=await F.createFolder(d.value,A());console.log("addFolder",e.data),await C(),b()}async function H(){const e=await F.createDocument(A(),d.value,null);console.log("addDocument",e.data),await C(),b()}function K(){console.log("&*&&***open"),d.value="",D.value=!0}function O(){console.log(),d.value="",V.value=!0}async function Q(e){let a=k.value[e].id;console.log("projPos111",e),await ne.getSingleProject(a),se(a),await E.push("/design")}async function W(e){let a=k.value[e].id;G.value=!1,S.value=a;let t=[];for(let s=0;s<v.value.length;s++)v.value[s].folder===a&&t.push({id:v.value[s].id,name:v.value[s].title});J.value=t.value}function B(){D.value=!1}function T(){V.value=!1}async function C(){const e=await F.getAllDocuments(A());let a=[];for(let o=0;o<e.data.length;o++)e.data[o].folder===void 0?a.push({id:e.data[o].id,name:e.data[o].name,type:1}):a.push({id:e.data[o].id,name:e.data[o].title,type:0});$.value=a;let t=[],s=[];for(let o=0;o<e.data.length;o++)if(e.data[o].folder===null)t.push({id:e.data[o].id,name:e.data[o].name});else if(e.data[o].folder===void 0){s.push({id:e.data[o].id,name:e.data[o].name});for(let y=0;o<e.data[o].documents.length;y++)t.push({id:e.data[o].documents[y].id,name:e.data[o].documents[y].name})}v.value=t,R.value=s,console.log("firstDoc.value",$.value),console.log("folderArray.value",R.value),console.log("documentArray.value",v.value),k.value=e.data}function b(){w.value=[];let e=[];for(const a of $.value)e.push(a.name);M.value=e,g.value=e.length,console.log("numRows",N.value);for(let a=0;a<N.value;a++){let t=[];for(let s=0;s<P;s++){let o=a*P+s;o<g.value&&t.push(o)}w.value.push(t),console.log("rows",w)}console.log(g.value)}return l([]),oe(async()=>{await C(),b(),console.log("$$$$$$$$$$",g.value)}),(e,a)=>{const t=f("el-button"),s=f("el-input"),o=f("el-dialog"),y=f("el-card"),X=f("el-col"),Y=f("el-row");return m(),h("div",null,[u(t,{onClick:K},{default:c(()=>[p(" 新建文件夹 ")]),_:1}),u(t,{onClick:O},{default:c(()=>[p(" 新建文件 ")]),_:1}),(m(!0),h(U,null,z(w.value,(Z,i)=>(m(),q(Y,{key:i,class:"card-row"},{default:c(()=>[(m(!0),h(U,null,z(Z,(pe,r)=>(m(),q(X,{key:r,span:4,class:"card-col"},{default:c(()=>[u(y,{onMouseover:n=>j.value=i*4+r,onMouseleave:a[6]||(a[6]=n=>j.value=-1),shadow:"hover","body-style":{padding:"0px"},class:"small-card"},{default:c(()=>[$.value.filter(n=>n.id===k.value[i*4+r].id)[0].type===0?(m(),h("img",{key:0,onClick:n=>Q(i*4+r),src:"https://pic1.zhimg.com/v2-65354520edd978c49d00a7a710feb9c5_r.jpg?source=1940ef5c",class:"image"},null,8,ue)):(m(),h("img",{key:1,src:"https://img2.baidu.com/it/u=4238855641,2359345742&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=1083",onClick:n=>W(i*4+r),class:"image"},null,8,ce)),_("div",{class:te(["project-info",{active:j.value===i*4+r}])},[_("div",de,[_("span",null,le(M.value[i*4+r]),1),_("div",ie,[u(o,{modelValue:D.value,"onUpdate:modelValue":a[2]||(a[2]=n=>D.value=n),title:"新建文件夹",class:"project-dialog"},{default:c(()=>[u(s,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value=n),placeholder:"文件夹名称",class:"input-field"},null,8,["modelValue"]),_("span",re,[u(t,{type:"primary",onClick:a[1]||(a[1]=n=>{L(),B()}),class:"confirm-button"},{default:c(()=>[p("确认")]),_:1}),u(t,{onClick:B,class:"cancel-button"},{default:c(()=>[p("取消")]),_:1})])]),_:1},8,["modelValue"]),u(o,{modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=n=>V.value=n),title:"新建文档",class:"project-dialog"},{default:c(()=>[u(s,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=n=>d.value=n),placeholder:"文档名称",class:"input-field"},null,8,["modelValue"]),_("span",me,[u(t,{type:"primary",onClick:a[4]||(a[4]=n=>{H(),T()}),class:"confirm-button"},{default:c(()=>[p("确认")]),_:1}),u(t,{onClick:T,class:"cancel-button"},{default:c(()=>[p("取消")]),_:1})])]),_:1},8,["modelValue"])])])],2)]),_:2},1032,["onMouseover"])]),_:2},1024))),128))]),_:2},1024))),128))])}}},he=x(ve,[["__scopeId","data-v-2a9d16f7"]]);export{he as default};
