import{_ as me,u as fe,q as Y,e as a,h as K,J as re,s as ge,r as l,o as M,c as G,F as Z,x as ee,z as Q,w as o,b as e,a as c,A as be,t as ie,D as de,K as $e,L as Ce,k as x,M as _e,B as we,N as he,O as Pe,p as je,d as ye,l as ke,i as se,v as Ve,P as ve,Q as xe}from"./index-d420b9fe.js";import{p as U}from"./proj-96266823.js";const Me=["onClick"],Re={class:"project-name"},De={class:"project-actions"},Ne={class:"dialog-footer"},ce=4,Se={__name:"projectMain",props:["teamId","ordering","radio1","radio2"],setup(y,{expose:C}){const R=y,g=fe();Y(new Date);const i=a(!1),d=a(""),r=a([]),p=a([]),h=a(),_=a(),S=a(),D=a([]),w=K(()=>Math.ceil(h.value/ce));a(!1);const u=a(),f=a();u.value=R.radio1,f.value=R.radio2;const P=a("");P.value=R.teamId;const m=K(()=>R.ordering);Y({name:"",describe:""});const b=a(-1);a(!1);async function s(t){let n=j.value[t].id;console.log("projPos111",t),await U.copyProject(_e(),n),await O(),$()}function I(t,n){console.log("rowIndex,colIndex",t,n),_.value=t,S.value=n,d.value="",i.value=!0}async function A(t){let n=j.value[t].id;console.log("projPos111",t),await U.getSingleProject(n),we(n),await g.push("/design")}function J(){i.value=!1}async function L(t){let n=j.value[t].id;console.log(j.value[t]),console.log("projPos",t),console.log("projId",n),h.value--,await U.deleteProject(P.value,n),await O(),$()}async function W(){let t=_.value*4+S.value,n=j.value[t].id;j.value[t].name=d.value,console.log("myResult",j.value),console.log("row",_.value),console.log("col",S.value),console.log("projPos##########",t),console.log("adsprojName",d.value),he(d.value),console.log("projId",n),console.log("describe",j.value[t].describe),await U.resetProject(d.value,j.value[t].describe,n),$()}const H=a([]),B=a();re(B,()=>{$()});const j=K(()=>H.value.filter(t=>!B.value||t.name.toLowerCase().includes(B.value.toLowerCase())));function le(){u.value==="1"&&f.value==="1"?m.value="name":u.value==="1"&&f.value==="2"?m.value="-name":u.value==="2"&&f.value==="1"?m.value="create_time":u.value==="2"&&f.value==="2"?m.value="-create_time":u.value==="3"&&f.value==="1"?m.value="update_time":u.value==="3"&&f.value==="2"?m.value="-update_time":m.value="wrong",console.log("radio1.value",u.value),console.log("radio2.value",f.value),console.log("ordering.value",m.value)}async function O(){console.log("ordering",m);const t=await U.getAllProjects(P.value,m.value);H.value=t.data}function q(t){B.value=t}function $(){D.value=[],console.log("myResult",j.value);let t=[],n=[];for(const k of j.value)t.push(k.name),n.push(k.describe);r.value=t,p.value=n,h.value=t.length,console.log("numRows",w.value);for(let k=0;k<w.value;k++){let V=[];for(let F=0;F<ce;F++){let E=k*ce+F;E<h.value&&V.push(E)}D.value.push(V),console.log("rows",D)}console.log(h.value),console.log("name::::",r.value),console.log("name@@@@",r.value[0])}return C({showProjects1:$,getSearch:q,getData:O,getOrdering:le}),ge(async()=>{await O(),$(),console.log("$$$$$$$$$$",h.value)}),(t,n)=>{const k=l("el-icon"),V=l("el-button"),F=l("font-awesome-icon"),E=l("el-input"),ae=l("el-dialog"),te=l("el-card"),ne=l("el-col"),X=l("el-row");return M(),G("div",null,[(M(!0),G(Z,null,ee(D.value,(v,z)=>(M(),Q(X,{key:z,class:"card-row"},{default:o(()=>[(M(!0),G(Z,null,ee(v,(He,T)=>(M(),Q(ne,{key:T,span:4,class:"card-col"},{default:o(()=>[e(te,{onMouseover:N=>b.value=z*4+T,onMouseleave:n[3]||(n[3]=N=>b.value=-1),shadow:"hover","body-style":{padding:"0px"},class:"small-card"},{default:o(()=>[c("img",{onClick:N=>A(z*4+T),src:"https://pic1.zhimg.com/v2-65354520edd978c49d00a7a710feb9c5_r.jpg?source=1940ef5c",class:"image"},null,8,Me),c("div",{class:be(["project-info",{active:b.value===z*4+T}])},[c("div",Re,[c("span",null,"项目："+ie(r.value[z*4+T]),1),c("div",De,[e(V,{onClick:N=>L(z*4+T),text:""},{default:o(()=>[e(k,{class:"delete"},{default:o(()=>[e(de($e))]),_:1})]),_:2},1032,["onClick"]),e(V,{onClick:N=>s(z*4+T),text:""},{default:o(()=>[e(k,null,{default:o(()=>[e(de(Ce))]),_:1})]),_:2},1032,["onClick"]),e(V,{class:"edit",onClick:N=>I(z,T),text:""},{default:o(()=>[e(F,{icon:["fas","pen-to-square"]})]),_:2},1032,["onClick"]),e(ae,{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=N=>i.value=N),title:"修改项目名称",class:"project-dialog"},{default:o(()=>[e(E,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=N=>d.value=N),placeholder:"新项目名称",class:"input-field"},null,8,["modelValue"]),c("span",Ne,[e(V,{type:"primary",onClick:n[1]||(n[1]=N=>{W(),J()}),class:"confirm-button"},{default:o(()=>[x("确认")]),_:1}),e(V,{onClick:J,class:"cancel-button"},{default:o(()=>[x("取消")]),_:1})])]),_:1},8,["modelValue"])])]),c("p",null,"项目简介: "+ie(p.value[z*4+T]),1)],2)]),_:2},1032,["onMouseover"])]),_:2},1024))),128))]),_:2},1024))),128))])}}},Ie=me(Se,[["__scopeId","data-v-e9c34ac6"]]);const ze=y=>(je("data-v-b4875dfd"),y=y(),ye(),y),Te=ze(()=>c("img",{src:"https://pic1.zhimg.com/v2-65354520edd978c49d00a7a710feb9c5_r.jpg?source=1940ef5c",class:"image"},null,-1)),Ue={style:{padding:"10px"}},ue=4,Ae={__name:"projectMainRe",props:["teamId"],setup(y,{expose:C}){const R=y;fe();const g=a([]),i=a(),d=a([]),r=a([]),p=K(()=>Math.ceil(i.value/ue));a(!1);const h=a("");h.value=R.teamId,console.log(h.value),Y({name:"",describe:""});async function _(){const w=await U.getReProject(h.value);d.value=w.data}function S(){r.value=[],console.log("myResult",d);let w=[];for(const u of d.value)w.push(u.name);g.value=w,i.value=w.length,console.log("numRows",p.value);for(let u=0;u<p.value;u++){let f=[];for(let P=0;P<ue;P++){let m=u*ue+P;m<i.value&&f.push(m)}r.value.push(f),console.log("rows",r)}console.log(i.value),console.log("name::::",g.value),console.log("name@@@@",g.value[0])}async function D(w){let u=d.value[w].id;console.log("projPos",w),console.log("projId",u),i.value--,await U.restoreProject(h.value,u),await _(),S()}return C({showProjects:S,getData:_}),ge(async()=>{await _(),S(),console.log("$$$$$$$$$$",i.value)}),(w,u)=>{const f=l("el-icon"),P=l("el-button"),m=l("el-card"),b=l("el-col"),s=l("el-row");return M(),G("div",null,[(M(!0),G(Z,null,ee(r.value,(I,A)=>(M(),Q(s,{key:A,class:"card-row"},{default:o(()=>[(M(!0),G(Z,null,ee(I,(J,L)=>(M(),Q(b,{key:L,span:4,class:"card-col"},{default:o(()=>[e(m,{shadow:"hover","body-style":{padding:"0px"},class:"small-card"},{default:o(()=>[Te,c("div",Ue,[c("span",null,"项目名称:"+ie(g.value[A*4+L]),1),e(P,{onClick:W=>D(A*4+L),text:""},{default:o(()=>[e(f,null,{default:o(()=>[e(de(Pe))]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))])}}},Fe=me(Ae,[["__scopeId","data-v-b4875dfd"]]);const oe=y=>(je("data-v-edaadc88"),y=y(),ye(),y),Le=oe(()=>c("span",null,"项目视图",-1)),Be=oe(()=>c("span",{class:"all_project"},"全部项目",-1)),Oe=oe(()=>c("span",{class:""},"回收站",-1)),qe={class:"toolbar"},Ee={class:"toolbar-left"},Ge=oe(()=>c("button",null,[c("i",{class:"bx bx-search"})],-1)),Je={class:"toolbar-right"},Ke={class:"mb-2 flex items-center text-sm"},Qe={class:"dialog-footer"},pe="140px",We={__name:"projectManage",setup(y){const C=a(null),R=a(null),g=a(!0),i=a(!1),d=a("");d.value=_e();const r=a("2"),p=a("2"),h=K(()=>r.value==="1"&&p.value==="1"?"name":r.value==="1"&&p.value==="2"?"-name":r.value==="2"&&p.value==="1"?"create_time":r.value==="2"&&p.value==="2"?"-create_time":r.value==="3"&&p.value==="1"?"update_time":r.value==="3"&&p.value==="2"?"-update_time":"wrong"),_=Y({name:"",describe:""}),S={date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"};a(Array.from({length:20}).fill(S)),a(null),a(null);const D=a();async function w(b){let s="create_time";const I=await U.getAllProjects(_e(),s);console.log("***********Projectsresult***********"),console.log(I.data),console.log("***********result***********"),C.value.getSearch(b),C.value.showProjects1()}async function u(){console.log("$ordering"),await C.value.getData(),C.value.showProjects1()}async function f(){if(_.name==="")i.value=!0;else{const b=await U.addProject(_.name,_.describe,d.value);i.value=!1,we(b.data.id),he(_.name),await xe.push("/design"),console.log("addProject成功被调用！")}}function P(){g.value=!1,console.log("isShowTrash11111",g.value)}function m(){g.value=!0,console.log("isShowTrash22222",g.value)}return re(g,async b=>{await R.value.getData(),R.value.showProjects(),await C.value.getData(),C.value.showProjects1()}),re(r,()=>{console.log("radio1.watch",r.value)}),(b,s)=>{const I=l("font-awesome-icon"),A=l("el-menu-item"),J=l("el-menu-item-group"),L=l("el-sub-menu"),W=l("el-menu"),H=l("el-col"),B=l("el-row"),j=l("el-aside"),le=l("arrow-down"),O=l("el-icon"),q=l("el-button"),$=l("el-radio"),t=l("el-radio-group"),n=l("el-dropdown-menu"),k=l("el-dropdown"),V=l("el-input"),F=l("el-form-item"),E=l("el-form"),ae=l("el-dialog"),te=l("el-header"),ne=l("el-main"),X=l("el-container");return M(),Q(X,{class:"layout-container-demo",style:{height:"700px"}},{default:o(()=>[e(j,{width:"200px"},{default:o(()=>[e(B,{class:"tac"},{default:o(()=>[e(H,{span:24},{default:o(()=>[e(W,{"default-active":"2",class:"el-menu-vertical-demo",onOpen:b.handleOpen,onClose:u},{default:o(()=>[e(L,{index:"1"},{title:o(()=>[e(I,{class:"icon",icon:["fas","diagram-project"]}),Le]),default:o(()=>[e(J,{title:"操作"},{default:o(()=>[e(A,{onClick:m,index:"1-1"},{default:o(()=>[e(I,{class:"icon",icon:["fas","border-all"]}),Be]),_:1}),e(A,{onClick:P,index:"1-2"},{default:o(()=>[e(I,{class:"icon",icon:["fas","recycle"]}),Oe]),_:1})]),_:1})]),_:1})]),_:1},8,["onOpen"])]),_:1})]),_:1})]),_:1}),e(X,null,{default:o(()=>[e(te,{style:{"text-align":"right","font-size":"12px"}},{default:o(()=>[c("div",qe,[c("div",Ee,[c("form",{class:"search-bar",onSubmit:s[2]||(s[2]=ke(()=>{},["prevent"]))},[se(c("input",{"onUpdate:modelValue":s[0]||(s[0]=v=>D.value=v),size:"small",placeholder:"Project Name....",onInput:s[1]||(s[1]=v=>w(D.value))},null,544),[[Ve,D.value]]),Ge],32)]),c("div",Je,[e(k,{trigger:"click"},{dropdown:o(()=>[e(n,null,{default:o(()=>[c("div",Ke,[e(t,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=v=>r.value=v),class:"ml-4",onChange:u},{default:o(()=>[e($,{label:"1",size:"large"},{default:o(()=>[x("名称")]),_:1}),e($,{label:"2",size:"large"},{default:o(()=>[x("创建时间")]),_:1}),e($,{label:"3",size:"large"},{default:o(()=>[x("更新时间")]),_:1})]),_:1},8,["modelValue"])]),c("div",{class:"my-2 flex items-center text-sm",onChange:u},[e(t,{modelValue:p.value,"onUpdate:modelValue":s[4]||(s[4]=v=>p.value=v),class:"ml-4"},{default:o(()=>[e($,{label:"1"},{default:o(()=>[x("递增")]),_:1}),e($,{label:"2"},{default:o(()=>[x("递减")]),_:1})]),_:1},8,["modelValue"])],32)]),_:1})]),default:o(()=>[e(q,{type:"primary",style:{"margin-right":"8px"}},{default:o(()=>[x(" 排序"),e(O,{class:"el-icon--right"},{default:o(()=>[e(le)]),_:1})]),_:1})]),_:1}),c("div",null,[e(q,{style:{"margin-right":"8px","margin-top":"0px"},onClick:s[5]||(s[5]=v=>i.value=!0)},{default:o(()=>[x("新建项目")]),_:1}),e(ae,{draggable:"true",modelValue:i.value,"onUpdate:modelValue":s[9]||(s[9]=v=>i.value=v),title:"创建一个新的项目:",center:"",width:"30%"},{footer:o(()=>[c("span",Qe,[e(q,{onClick:s[8]||(s[8]=v=>i.value=!1)},{default:o(()=>[x(" 取消 ")]),_:1}),e(q,{type:"primary",onClick:f},{default:o(()=>[x(" 确定 ")]),_:1})])]),default:o(()=>[e(E,{model:_},{default:o(()=>[e(F,{label:"项目名称","label-width":pe},{default:o(()=>[e(V,{modelValue:_.name,"onUpdate:modelValue":s[6]||(s[6]=v=>_.name=v),autocomplete:"off",class:"element-form"},null,8,["modelValue"])]),_:1}),e(F,{label:"项目描述","label-width":pe},{default:o(()=>[e(V,{modelValue:_.describe,"onUpdate:modelValue":s[7]||(s[7]=v=>_.describe=v),autocomplete:"off",class:"element-form"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])])])]),_:1}),e(ne,null,{default:o(()=>[se(e(Ie,{ref_key:"childFunctions1",ref:C,teamId:d.value,ordering:h.value,radio1:r.value,radio2:p.value},null,8,["teamId","ordering","radio1","radio2"]),[[ve,g.value===!0]]),se(e(Fe,{ref_key:"childFunctions2",ref:R,teamId:d.value},null,8,["teamId"]),[[ve,g.value===!1]])]),_:1})]),_:1})]),_:1})}}},Ze=me(We,[["__scopeId","data-v-edaadc88"]]);export{Ze as default};
