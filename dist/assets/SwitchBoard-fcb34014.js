import{_ as E,e as p,g as R,u as G,q as H,s as M,r as n,o as u,c as B,a as s,b as t,F as W,x as Y,w as o,z as g,D as Z,t as J,k as f,m as S,p as K,d as O,Y as P,Z as Q,G as X}from"./index-d420b9fe.js";import{t as v}from"./team-b7aacf9b.js";const b=d=>(K("data-v-53f077c8"),d=d(),O(),d),ee={class:"back"},te={class:"board"},ae=b(()=>s("span",{class:"title"},"请选择团队",-1)),oe=b(()=>s("br",null,null,-1)),le=b(()=>s("span",{class:"subtitle"},"选择后将自动为您跳转到主页面",-1)),ne=b(()=>s("br",null,null,-1)),se={class:"moji"},ie={class:"team-name"},ue={class:"dialog-footer"},de={__name:"SwitchBoard",setup(d){const i=p(!1),k=p([]),h=p([]);R();const $=G(),c=p(!1);async function w(){let l=await v.queryAllTeams();k.value=l.data}const m=H({name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""});function A(l,e){console.log(l),console.log(e),P(l),Q(e),$.push("/home")}async function C(){let l=await v.queryAllInvitation();console.log(l),l.data.forEach(e=>{e.team.update_time=Date.parse(e.create_time)}),h.value=l.data.sort((e,y)=>y.team.update_time-e.team.update_time)}async function N(){i.value=!1,await v.addTeam(m.name),await w()}async function V(l,e){await v.acceptInvitation(l.id,e),await w(),await C(),c.value=!1}return M(()=>{w(),C()}),(l,e)=>{const y=n("el-divider"),q=n("el-icon"),D=n("el-menu-item"),T=n("el-menu"),r=n("el-table-column"),_=n("el-button"),F=n("el-table"),I=n("el-dialog"),L=n("font-awesome-icon"),z=n("el-input"),U=n("el-form-item"),j=n("el-form");return u(),B("div",ee,[s("div",te,[ae,oe,le,ne,s("button",{onClick:e[0]||(e[0]=a=>c.value=!0),class:"view-invitations-button"},"查看你收到的邀请"),t(y),(u(!0),B(W,null,Y(k.value,a=>(u(),g(T,{key:"team.id",class:"el-menu-vertical-demo"},{default:o(()=>[t(D,{index:"1",onClick:x=>A(a.id,a.name)},{default:o(()=>[s("div",se,[t(q,null,{default:o(()=>[t(Z(X))]),_:1}),s("span",ie,J(a.name),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128)),t(I,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),title:"你收到的邀请"},{default:o(()=>[t(F,{data:h.value,style:{width:"100%"}},{default:o(()=>[t(r,{prop:"team.name",label:"团队名称",sortable:""}),t(r,{prop:"create_time",label:"发送时间",sortable:""}),t(r,{prop:"status",label:"状态",sortable:""}),t(r,{align:"right",width:"200"},{default:o(a=>[a.row.status==="已发送"?(u(),g(_,{key:0,size:"small",type:"danger",onClick:x=>V(a.row,!1)},{default:o(()=>[f("拒绝")]),_:2},1032,["onClick"])):S("",!0),a.row.status==="已发送"?(u(),g(_,{key:1,size:"small",type:"danger",onClick:x=>V(a.row,!0)},{default:o(()=>[f("接受")]),_:2},1032,["onClick"])):S("",!0)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),t(T,null,{default:o(()=>[s("div",{class:"create-team-btn",onClick:e[2]||(e[2]=a=>i.value=!0)},[t(L,{icon:["fas","plus"]})]),t(I,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value=a),title:"欢迎来到寄了网站，请创建团队",center:"",width:"35%"},{footer:o(()=>[s("span",ue,[t(_,{onClick:e[4]||(e[4]=a=>i.value=!1)},{default:o(()=>[f("Cancel")]),_:1}),t(_,{type:"primary",onClick:N},{default:o(()=>[f(" Confirm ")]),_:1})])]),default:o(()=>[t(j,{model:m},{default:o(()=>[t(U,{label:"团队名称","label-width":l.formLabelWidth},{default:o(()=>[t(z,{modelValue:m.name,"onUpdate:modelValue":e[3]||(e[3]=a=>m.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})])])}}},re=E(de,[["__scopeId","data-v-53f077c8"]]);export{re as default};
