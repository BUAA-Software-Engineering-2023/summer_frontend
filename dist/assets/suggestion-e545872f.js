import{V as lt}from"./index-bea6d51e.js";import{a9 as mt,aa as vt,_ as ht,o as K,c as Y,F as gt,x as yt,A as bt,t as Tt,M as wt}from"./index-d420b9fe.js";import{t as At}from"./team-b7aacf9b.js";import{d as Et}from"./document-1fa91d60.js";import"./FileSaver.min-f6114a76.js";var Ot="tippy-box",je="tippy-content",Dt="tippy-backdrop",We="tippy-arrow",$e="tippy-svg-arrow",L={passive:!0,capture:!0},qe=function(){return document.body};function oe(e,i,r){if(Array.isArray(e)){var a=e[i];return a??(Array.isArray(r)?r[i]:r)}return e}function fe(e,i){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(i+"]")>-1}function ze(e,i){return typeof e=="function"?e.apply(void 0,i):e}function Re(e,i){if(i===0)return e;var r;return function(a){clearTimeout(r),r=setTimeout(function(){e(a)},i)}}function Ct(e){return e.split(/\s+/).filter(Boolean)}function M(e){return[].concat(e)}function Ue(e,i){e.indexOf(i)===-1&&e.push(i)}function Lt(e){return e.filter(function(i,r){return e.indexOf(i)===r})}function xt(e){return e.split("-")[0]}function G(e){return[].slice.call(e)}function Ve(e){return Object.keys(e).reduce(function(i,r){return e[r]!==void 0&&(i[r]=e[r]),i},{})}function k(){return document.createElement("div")}function J(e){return["Element","Fragment"].some(function(i){return fe(e,i)})}function It(e){return fe(e,"NodeList")}function St(e){return fe(e,"MouseEvent")}function Mt(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function _t(e){return J(e)?[e]:It(e)?G(e):Array.isArray(e)?e:G(document.querySelectorAll(e))}function ae(e,i){e.forEach(function(r){r&&(r.style.transitionDuration=i+"ms")})}function ke(e,i){e.forEach(function(r){r&&r.setAttribute("data-state",i)})}function Rt(e){var i,r=M(e),a=r[0];return a!=null&&(i=a.ownerDocument)!=null&&i.body?a.ownerDocument:document}function Ut(e,i){var r=i.clientX,a=i.clientY;return e.every(function(m){var p=m.popperRect,u=m.popperState,v=m.props,l=v.interactiveBorder,w=xt(u.placement),h=u.modifiersData.offset;if(!h)return!0;var N=w==="bottom"?h.top.y:0,B=w==="top"?h.bottom.y:0,_=w==="right"?h.left.x:0,O=w==="left"?h.right.x:0,F=p.top-a+N>l,Q=a-p.bottom-B>l,Z=p.left-r+_>l,P=r-p.right-O>l;return F||Q||Z||P})}function se(e,i,r){var a=i+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(m){e[a](m,r)})}function He(e,i){for(var r=i;r;){var a;if(e.contains(r))return!0;r=r.getRootNode==null||(a=r.getRootNode())==null?void 0:a.host}return!1}var E={isTouch:!1},Ne=0;function Vt(){E.isTouch||(E.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ke))}function Ke(){var e=performance.now();e-Ne<20&&(E.isTouch=!1,document.removeEventListener("mousemove",Ke)),Ne=e}function kt(){var e=document.activeElement;if(Mt(e)){var i=e._tippy;e.blur&&!i.state.isVisible&&e.blur()}}function Ht(){document.addEventListener("touchstart",Vt,L),window.addEventListener("blur",kt)}var Nt=typeof window<"u"&&typeof document<"u",Bt=Nt?!!window.msCrypto:!1,Ft={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Pt={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},T=Object.assign({appendTo:qe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ft,Pt),jt=Object.keys(T),Wt=function(i){var r=Object.keys(i);r.forEach(function(a){T[a]=i[a]})};function Ye(e){var i=e.plugins||[],r=i.reduce(function(a,m){var p=m.name,u=m.defaultValue;if(p){var v;a[p]=e[p]!==void 0?e[p]:(v=T[p])!=null?v:u}return a},{});return Object.assign({},e,r)}function $t(e,i){var r=i?Object.keys(Ye(Object.assign({},T,{plugins:i}))):jt,a=r.reduce(function(m,p){var u=(e.getAttribute("data-tippy-"+p)||"").trim();if(!u)return m;if(p==="content")m[p]=u;else try{m[p]=JSON.parse(u)}catch{m[p]=u}return m},{});return a}function Be(e,i){var r=Object.assign({},i,{content:ze(i.content,[e])},i.ignoreAttributes?{}:$t(e,i.plugins));return r.aria=Object.assign({},T.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?i.interactive:r.aria.expanded,content:r.aria.content==="auto"?i.interactive?null:"describedby":r.aria.content},r}var qt=function(){return"innerHTML"};function ce(e,i){e[qt()]=i}function Fe(e){var i=k();return e===!0?i.className=We:(i.className=$e,J(e)?i.appendChild(e):ce(i,e)),i}function Pe(e,i){J(i.content)?(ce(e,""),e.appendChild(i.content)):typeof i.content!="function"&&(i.allowHTML?ce(e,i.content):e.textContent=i.content)}function de(e){var i=e.firstElementChild,r=G(i.children);return{box:i,content:r.find(function(a){return a.classList.contains(je)}),arrow:r.find(function(a){return a.classList.contains(We)||a.classList.contains($e)}),backdrop:r.find(function(a){return a.classList.contains(Dt)})}}function Xe(e){var i=k(),r=k();r.className=Ot,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var a=k();a.className=je,a.setAttribute("data-state","hidden"),Pe(a,e.props),i.appendChild(r),r.appendChild(a),m(e.props,e.props);function m(p,u){var v=de(i),l=v.box,w=v.content,h=v.arrow;u.theme?l.setAttribute("data-theme",u.theme):l.removeAttribute("data-theme"),typeof u.animation=="string"?l.setAttribute("data-animation",u.animation):l.removeAttribute("data-animation"),u.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof u.maxWidth=="number"?u.maxWidth+"px":u.maxWidth,u.role?l.setAttribute("role",u.role):l.removeAttribute("role"),(p.content!==u.content||p.allowHTML!==u.allowHTML)&&Pe(w,e.props),u.arrow?h?p.arrow!==u.arrow&&(l.removeChild(h),l.appendChild(Fe(u.arrow))):l.appendChild(Fe(u.arrow)):h&&l.removeChild(h)}return{popper:i,onUpdate:m}}Xe.$$tippy=!0;var zt=1,X=[],ue=[];function Kt(e,i){var r=Be(e,Object.assign({},T,Ye(Ve(i)))),a,m,p,u=!1,v=!1,l=!1,w=!1,h,N,B,_=[],O=Re(De,r.interactiveDebounce),F,Q=zt++,Z=null,P=Lt(r.plugins),Ge={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},t={id:Q,reference:e,popper:k(),popperInstance:Z,props:r,state:Ge,plugins:P,clearDelayTimeouts:it,setProps:ot,setContent:at,show:st,hide:ut,hideWithInteractivity:ct,enable:nt,disable:rt,unmount:dt,destroy:ft};if(!r.render)return t;var pe=r.render(t),d=pe.popper,le=pe.onUpdate;d.setAttribute("data-tippy-root",""),d.id="tippy-"+t.id,t.popper=d,e._tippy=t,d._tippy=t;var Je=P.map(function(n){return n.fn(t)}),Qe=e.hasAttribute("aria-expanded");return Ae(),V(),j(),y("onCreate",[t]),r.showOnCreate&&Me(),d.addEventListener("mouseenter",function(){t.props.interactive&&t.state.isVisible&&t.clearDelayTimeouts()}),d.addEventListener("mouseleave",function(){t.props.interactive&&t.props.trigger.indexOf("mouseenter")>=0&&R().addEventListener("mousemove",O)}),t;function me(){var n=t.props.touch;return Array.isArray(n)?n:[n,0]}function ve(){return me()[0]==="hold"}function A(){var n;return!!((n=t.props.render)!=null&&n.$$tippy)}function D(){return F||e}function R(){var n=D().parentNode;return n?Rt(n):document}function U(){return de(d)}function he(n){return t.state.isMounted&&!t.state.isVisible||E.isTouch||h&&h.type==="focus"?0:oe(t.props.delay,n?0:1,T.delay)}function j(n){n===void 0&&(n=!1),d.style.pointerEvents=t.props.interactive&&!n?"":"none",d.style.zIndex=""+t.props.zIndex}function y(n,o,s){if(s===void 0&&(s=!0),Je.forEach(function(c){c[n]&&c[n].apply(c,o)}),s){var f;(f=t.props)[n].apply(f,o)}}function ge(){var n=t.props.aria;if(n.content){var o="aria-"+n.content,s=d.id,f=M(t.props.triggerTarget||e);f.forEach(function(c){var g=c.getAttribute(o);if(t.state.isVisible)c.setAttribute(o,g?g+" "+s:s);else{var b=g&&g.replace(s,"").trim();b?c.setAttribute(o,b):c.removeAttribute(o)}})}}function V(){if(!(Qe||!t.props.aria.expanded)){var n=M(t.props.triggerTarget||e);n.forEach(function(o){t.props.interactive?o.setAttribute("aria-expanded",t.state.isVisible&&o===D()?"true":"false"):o.removeAttribute("aria-expanded")})}}function ee(){R().removeEventListener("mousemove",O),X=X.filter(function(n){return n!==O})}function W(n){if(!(E.isTouch&&(l||n.type==="mousedown"))){var o=n.composedPath&&n.composedPath()[0]||n.target;if(!(t.props.interactive&&He(d,o))){if(M(t.props.triggerTarget||e).some(function(s){return He(s,o)})){if(E.isTouch||t.state.isVisible&&t.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[t,n]);t.props.hideOnClick===!0&&(t.clearDelayTimeouts(),t.hide(),v=!0,setTimeout(function(){v=!1}),t.state.isMounted||te())}}}function ye(){l=!0}function be(){l=!1}function Te(){var n=R();n.addEventListener("mousedown",W,!0),n.addEventListener("touchend",W,L),n.addEventListener("touchstart",be,L),n.addEventListener("touchmove",ye,L)}function te(){var n=R();n.removeEventListener("mousedown",W,!0),n.removeEventListener("touchend",W,L),n.removeEventListener("touchstart",be,L),n.removeEventListener("touchmove",ye,L)}function Ze(n,o){we(n,function(){!t.state.isVisible&&d.parentNode&&d.parentNode.contains(d)&&o()})}function et(n,o){we(n,o)}function we(n,o){var s=U().box;function f(c){c.target===s&&(se(s,"remove",f),o())}if(n===0)return o();se(s,"remove",N),se(s,"add",f),N=f}function x(n,o,s){s===void 0&&(s=!1);var f=M(t.props.triggerTarget||e);f.forEach(function(c){c.addEventListener(n,o,s),_.push({node:c,eventType:n,handler:o,options:s})})}function Ae(){ve()&&(x("touchstart",Oe,{passive:!0}),x("touchend",Ce,{passive:!0})),Ct(t.props.trigger).forEach(function(n){if(n!=="manual")switch(x(n,Oe),n){case"mouseenter":x("mouseleave",Ce);break;case"focus":x(Bt?"focusout":"blur",Le);break;case"focusin":x("focusout",Le);break}})}function Ee(){_.forEach(function(n){var o=n.node,s=n.eventType,f=n.handler,c=n.options;o.removeEventListener(s,f,c)}),_=[]}function Oe(n){var o,s=!1;if(!(!t.state.isEnabled||xe(n)||v)){var f=((o=h)==null?void 0:o.type)==="focus";h=n,F=n.currentTarget,V(),!t.state.isVisible&&St(n)&&X.forEach(function(c){return c(n)}),n.type==="click"&&(t.props.trigger.indexOf("mouseenter")<0||u)&&t.props.hideOnClick!==!1&&t.state.isVisible?s=!0:Me(n),n.type==="click"&&(u=!s),s&&!f&&$(n)}}function De(n){var o=n.target,s=D().contains(o)||d.contains(o);if(!(n.type==="mousemove"&&s)){var f=ne().concat(d).map(function(c){var g,b=c._tippy,I=(g=b.popperInstance)==null?void 0:g.state;return I?{popperRect:c.getBoundingClientRect(),popperState:I,props:r}:null}).filter(Boolean);Ut(f,n)&&(ee(),$(n))}}function Ce(n){var o=xe(n)||t.props.trigger.indexOf("click")>=0&&u;if(!o){if(t.props.interactive){t.hideWithInteractivity(n);return}$(n)}}function Le(n){t.props.trigger.indexOf("focusin")<0&&n.target!==D()||t.props.interactive&&n.relatedTarget&&d.contains(n.relatedTarget)||$(n)}function xe(n){return E.isTouch?ve()!==n.type.indexOf("touch")>=0:!1}function Ie(){Se();var n=t.props,o=n.popperOptions,s=n.placement,f=n.offset,c=n.getReferenceClientRect,g=n.moveTransition,b=A()?de(d).arrow:null,I=c?{getBoundingClientRect:c,contextElement:c.contextElement||D()}:e,_e={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(q){var S=q.state;if(A()){var pt=U(),ie=pt.box;["placement","reference-hidden","escaped"].forEach(function(z){z==="placement"?ie.setAttribute("data-placement",S.placement):S.attributes.popper["data-popper-"+z]?ie.setAttribute("data-"+z,""):ie.removeAttribute("data-"+z)}),S.attributes.popper={}}}},C=[{name:"offset",options:{offset:f}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!g}},_e];A()&&b&&C.push({name:"arrow",options:{element:b,padding:3}}),C.push.apply(C,(o==null?void 0:o.modifiers)||[]),t.popperInstance=vt(I,d,Object.assign({},o,{placement:s,onFirstUpdate:B,modifiers:C}))}function Se(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)}function tt(){var n=t.props.appendTo,o,s=D();t.props.interactive&&n===qe||n==="parent"?o=s.parentNode:o=ze(n,[s]),o.contains(d)||o.appendChild(d),t.state.isMounted=!0,Ie()}function ne(){return G(d.querySelectorAll("[data-tippy-root]"))}function Me(n){t.clearDelayTimeouts(),n&&y("onTrigger",[t,n]),Te();var o=he(!0),s=me(),f=s[0],c=s[1];E.isTouch&&f==="hold"&&c&&(o=c),o?a=setTimeout(function(){t.show()},o):t.show()}function $(n){if(t.clearDelayTimeouts(),y("onUntrigger",[t,n]),!t.state.isVisible){te();return}if(!(t.props.trigger.indexOf("mouseenter")>=0&&t.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(n.type)>=0&&u)){var o=he(!1);o?m=setTimeout(function(){t.state.isVisible&&t.hide()},o):p=requestAnimationFrame(function(){t.hide()})}}function nt(){t.state.isEnabled=!0}function rt(){t.hide(),t.state.isEnabled=!1}function it(){clearTimeout(a),clearTimeout(m),cancelAnimationFrame(p)}function ot(n){if(!t.state.isDestroyed){y("onBeforeUpdate",[t,n]),Ee();var o=t.props,s=Be(e,Object.assign({},o,Ve(n),{ignoreAttributes:!0}));t.props=s,Ae(),o.interactiveDebounce!==s.interactiveDebounce&&(ee(),O=Re(De,s.interactiveDebounce)),o.triggerTarget&&!s.triggerTarget?M(o.triggerTarget).forEach(function(f){f.removeAttribute("aria-expanded")}):s.triggerTarget&&e.removeAttribute("aria-expanded"),V(),j(),le&&le(o,s),t.popperInstance&&(Ie(),ne().forEach(function(f){requestAnimationFrame(f._tippy.popperInstance.forceUpdate)})),y("onAfterUpdate",[t,n])}}function at(n){t.setProps({content:n})}function st(){var n=t.state.isVisible,o=t.state.isDestroyed,s=!t.state.isEnabled,f=E.isTouch&&!t.props.touch,c=oe(t.props.duration,0,T.duration);if(!(n||o||s||f)&&!D().hasAttribute("disabled")&&(y("onShow",[t],!1),t.props.onShow(t)!==!1)){if(t.state.isVisible=!0,A()&&(d.style.visibility="visible"),j(),Te(),t.state.isMounted||(d.style.transition="none"),A()){var g=U(),b=g.box,I=g.content;ae([b,I],0)}B=function(){var C;if(!(!t.state.isVisible||w)){if(w=!0,d.offsetHeight,d.style.transition=t.props.moveTransition,A()&&t.props.animation){var re=U(),q=re.box,S=re.content;ae([q,S],c),ke([q,S],"visible")}ge(),V(),Ue(ue,t),(C=t.popperInstance)==null||C.forceUpdate(),y("onMount",[t]),t.props.animation&&A()&&et(c,function(){t.state.isShown=!0,y("onShown",[t])})}},tt()}}function ut(){var n=!t.state.isVisible,o=t.state.isDestroyed,s=!t.state.isEnabled,f=oe(t.props.duration,1,T.duration);if(!(n||o||s)&&(y("onHide",[t],!1),t.props.onHide(t)!==!1)){if(t.state.isVisible=!1,t.state.isShown=!1,w=!1,u=!1,A()&&(d.style.visibility="hidden"),ee(),te(),j(!0),A()){var c=U(),g=c.box,b=c.content;t.props.animation&&(ae([g,b],f),ke([g,b],"hidden"))}ge(),V(),t.props.animation?A()&&Ze(f,t.unmount):t.unmount()}}function ct(n){R().addEventListener("mousemove",O),Ue(X,O),O(n)}function dt(){t.state.isVisible&&t.hide(),t.state.isMounted&&(Se(),ne().forEach(function(n){n._tippy.unmount()}),d.parentNode&&d.parentNode.removeChild(d),ue=ue.filter(function(n){return n!==t}),t.state.isMounted=!1,y("onHidden",[t]))}function ft(){t.state.isDestroyed||(t.clearDelayTimeouts(),t.unmount(),Ee(),delete e._tippy,t.state.isDestroyed=!0,y("onDestroy",[t]))}}function H(e,i){i===void 0&&(i={});var r=T.plugins.concat(i.plugins||[]);Ht();var a=Object.assign({},i,{plugins:r}),m=_t(e),p=m.reduce(function(u,v){var l=v&&Kt(v,a);return l&&u.push(l),u},[]);return J(e)?p[0]:p}H.defaultProps=T;H.setDefaultProps=Wt;H.currentInput=E;Object.assign({},mt,{effect:function(i){var r=i.state,a={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,a.popper),r.styles=a,r.elements.arrow&&Object.assign(r.elements.arrow.style,a.arrow)}});H.setDefaultProps({render:Xe});const Yt={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:e}){return e.key==="ArrowUp"?(this.upHandler(),!0):e.key==="ArrowDown"?(this.downHandler(),!0):e.key==="Enter"?(this.enterHandler(),!0):!1},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},async selectItem(e){const i=this.$route.params.documentId;await Et.processAt(i,this.items[e].id),console.log(this.items[e].id);const r=this.items[e].name;r&&this.command({id:r})}}},Xt={class:"items"},Gt=["onClick"],Jt={key:1,class:"item"};function Qt(e,i,r,a,m,p){return K(),Y("div",Xt,[r.items.length?(K(!0),Y(gt,{key:0},yt(r.items,(u,v)=>(K(),Y("button",{class:bt(["item",{"is-selected":v===m.selectedIndex}]),key:v,onClick:l=>p.selectItem(v)},Tt(u.name),11,Gt))),128)):(K(),Y("div",Jt," No result "))])}const Zt=ht(Yt,[["render",Qt],["__scopeId","data-v-52cbf9ac"]]),an={items:async({query:e})=>{let i=await At.queryTeamMember(wt()),r=[];return i.data.members.forEach(a=>{r.push(a)}),r.filter(a=>a.name.toLowerCase().startsWith(e.toLowerCase()))},render:()=>{let e,i;return{onStart:r=>{e=new lt(Zt,{props:r,editor:r.editor}),r.clientRect&&(i=H("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){e.updateProps(r),r.clientRect&&i[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var a;return r.event.key==="Escape"?(i[0].hide(),!0):(a=e.ref)==null?void 0:a.onKeyDown(r)},onExit(){i[0].destroy(),e.destroy()}}}};export{an as s};
