(self["webpackChunkvisual_drag_demo"]=self["webpackChunkvisual_drag_demo"]||[]).push([[628],{1007:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var o=function(){var t=this,e=t._self._c;return e("div",{on:{click:t.onClick,mouseenter:t.onMouseEnter}},[t.config.component.startsWith("SVG")?e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}}):t._e(),t.config.component.startsWith("Music")||t.config.component.startsWith("Browser")?e(t.config.component,{ref:"component",tag:"component",staticClass:"component",staticStyle:{"pointer-events":"auto !important"},style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}}):e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}})],1)},i=[],r=n(9748),s=n(3229),a=n(6683),c=n(4003),l={mixins:[a.tA],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){setTimeout((()=>{(0,s.Z)(this.$refs.component.$el,this.config.animations)}),20)},methods:{getStyle:r.C2,getSVGStyle:r.WF,onClick(){const t=this.config.events;Object.keys(t).forEach((e=>{this[e](t[e])})),c.Z.$emit("v-click",this.config.id)},onMouseEnter(){c.Z.$emit("v-hover",this.config.id)}}},u=l,h=n(3736),d=(0,h.Z)(u,o,i,!1,null,"e9fb2a14",null),m=d.exports},9628:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Dr}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Toolbar"),e("main",[e("section",{staticClass:"left"},[e("ComponentList"),e("RealTimeComponentList")],1),e("section",{staticClass:"center"},[e("div",{staticClass:"content",on:{drop:t.handleDrop,dragover:t.handleDragOver,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[e("Editor")],1)]),e("section",{staticClass:"right"},[t.curComponent?e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[e(t.curComponent.component+"Attr",{tag:"component"})],1),e("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"动画",name:"animation"}},[e("AnimationList")],1),e("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"事件",name:"events"}},[e("EventList")],1)],1):e("CanvasAttr")],1)])],1)},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor",class:{edit:t.isEdit},style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},[e("Grid"),t._l(t.componentData,(function(n,o){return e("Shape",{key:n.id,class:{lock:n.isLock},style:t.getShapeStyle(n.style),attrs:{"default-style":n.style,active:n.id===(t.curComponent||{}).id,element:n,index:o}},[n.component.startsWith("SVG")?e(n.component,{tag:"component",staticClass:"component",style:t.getSVGStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):"VText"==n.component?e(n.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request},on:{input:t.handleInput}}):"Video"==n.component?e(n.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):e(n.component,{tag:"component",staticClass:"component",staticStyle:{"pointer-events":"none"},style:t.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}})],1)})),e("ContextMenu"),e("MarkLine"),e("Area",{directives:[{name:"show",rawName:"v-show",value:t.isShowArea,expression:"isShowArea"}],attrs:{start:t.start,width:t.width,height:t.height}})],2)},s=[],a=(n(6699),n(629)),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-lock"}),t._l(t.isActive()?t.getPointList():[],(function(n){return e("div",{key:n,staticClass:"shape-point",style:t.getPointStyle(n),on:{mousedown:function(e){return t.handleMouseDownOnPoint(n,e)}}})})),t._t("default")],2)},l=[],u=n(4003),h=n(3229),d=n(1457);const m={lt:p,t:y,rt:f,r:b,rb:g,b:w,lb:v,l:S};function p(t,e,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.Lb)(e,r),a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)(r,s,-t.rotate),l=c.x-a.x,u=c.y-a.y;if(o){l/u>n?(a.x+=Math.abs(l-u*n),l=u*n):(a.y+=Math.abs(u-l/n),u=l/n);const e=(0,d.Ej)(a,s,t.rotate);s=(0,d.Lb)(e,r),a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)(r,s,-t.rotate),l=c.x-a.x,u=c.y-a.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(a.x),t.top=Math.round(a.y))}function f(t,e,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.Lb)(e,r),a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)(r,s,-t.rotate),l=a.x-c.x,u=c.y-a.y;if(o){l/u>n?(a.x-=Math.abs(l-u*n),l=u*n):(a.y+=Math.abs(u-l/n),u=l/n);const e=(0,d.Ej)(a,s,t.rotate);s=(0,d.Lb)(e,r),a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)(r,s,-t.rotate),l=a.x-c.x,u=c.y-a.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(a.y))}function g(t,e,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.Lb)(e,r),a=(0,d.Ej)(r,s,-t.rotate),c=(0,d.Ej)(e,s,-t.rotate),l=c.x-a.x,u=c.y-a.y;if(o){l/u>n?(c.x-=Math.abs(l-u*n),l=u*n):(c.y-=Math.abs(u-l/n),u=l/n);const e=(0,d.Ej)(c,s,t.rotate);s=(0,d.Lb)(e,r),a=(0,d.Ej)(r,s,-t.rotate),c=(0,d.Ej)(e,s,-t.rotate),l=c.x-a.x,u=c.y-a.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(a.x),t.top=Math.round(a.y))}function v(t,e,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.Lb)(e,r),a=(0,d.Ej)(r,s,-t.rotate),c=(0,d.Ej)(e,s,-t.rotate),l=a.x-c.x,u=c.y-a.y;if(o){l/u>n?(c.x+=Math.abs(l-u*n),l=u*n):(c.y-=Math.abs(u-l/n),u=l/n);const e=(0,d.Ej)(c,s,t.rotate);s=(0,d.Lb)(e,r),a=(0,d.Ej)(r,s,-t.rotate),c=(0,d.Ej)(e,s,-t.rotate),l=a.x-c.x,u=c.y-a.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(a.y))}function y(t,e,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)({x:s.x,y:a.y},s,t.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),u={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function b(t,e,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)({x:a.x,y:s.y},s,t.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),u={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function w(t,e,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)({x:s.x,y:a.y},s,t.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),u={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function S(t,e,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.Ej)(e,s,-t.rotate),c=(0,d.Ej)({x:a.x,y:s.y},s,t.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),u={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function C(t,e,n,o,i,r){m[t](e,n,o,i,r)}var x=n(2648),E={props:{active:{type:Boolean,default:!1},element:{required:!0,type:Object,default:()=>{}},defaultStyle:{required:!0,type:Object,default:()=>{}},index:{required:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:(0,a.rn)(["curComponent","editor"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),u.Z.$on("runAnimation",(()=>{this.element==this.curComponent&&(0,h.Z)(this.$el,this.curComponent.animations)})),u.Z.$on("stopAnimation",(()=>{this.$el.classList.remove("animated","infinite")}))},methods:{getPointList(){return"line-shape"===this.element.component?this.pointList2:this.pointList},isActive(){return this.active&&!this.element.isLock},handleRotate(t){this.$store.commit("setClickComponentStatus",!0),t.preventDefault(),t.stopPropagation();const e={...this.defaultStyle},n=t.clientY,o=t.clientX,i=e.rotate,r=this.$el.getBoundingClientRect(),s=r.left+r.width/2,a=r.top+r.height/2,c=Math.atan2(n-a,o-s)/(Math.PI/180);let l=!1;const u=t=>{l=!0;const n=t.clientX,o=t.clientY,r=Math.atan2(o-a,n-s)/(Math.PI/180);e.rotate=i+r-c,this.$store.commit("setShapeStyle",e)},h=()=>{l&&this.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h),this.cursors=this.getCursor()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)},getPointStyle(t){const{width:e,height:n}=this.defaultStyle,o=/t/.test(t),i=/b/.test(t),r=/l/.test(t),s=/r/.test(t);let a=0,c=0;2===t.length?(a=r?0:e,c=o?0:n):((o||i)&&(a=e/2,c=o?0:n),(r||s)&&(a=r?0:e,c=Math.floor(n/2)));const l={marginLeft:"-4px",marginTop:"-4px",left:`${a}px`,top:`${c}px`,cursor:this.cursors[t]};return l},getCursor(){const{angleToCursor:t,initialAngle:e,pointList:n,curComponent:o}=this,i=(0,d.KV)(o.style.rotate),r={};let s=-1;return n.forEach((n=>{const o=(0,d.KV)(e[n]+i),a=t.length;while(1){s=(s+1)%a;const e=t[s];if(o<23||o>=338)return void(r[n]="nw-resize");if(e.start<=o&&o<e.end)return void(r[n]=e.cursor+"-resize")}})),r},handleMouseDownOnShape(t){if(this.$nextTick((()=>u.Z.$emit("componentClick"))),this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),(0,x.rc)(this.element.component)&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const e={...this.defaultStyle},n=t.clientY,o=t.clientX,i=Number(e.top),r=Number(e.left);let s=!1;const a=t=>{s=!0;const a=t.clientX,c=t.clientY;e.top=c-n+i,e.left=a-o+r,this.$store.commit("setShapeStyle",e),this.$nextTick((()=>{u.Z.$emit("move",c-n>0,a-o>0)}))},c=()=>{s&&this.$store.commit("recordSnapshot"),u.Z.$emit("unmove"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",c)},selectCurComponent(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu")},handleMouseDownOnPoint(t,e){this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),e.stopPropagation(),e.preventDefault();const n={...this.defaultStyle},o=n.width/n.height,i={x:n.left+n.width/2,y:n.top+n.height/2},r=this.editor.getBoundingClientRect(),s=e.target.getBoundingClientRect(),a={x:Math.round(s.left-r.left+e.target.offsetWidth/2),y:Math.round(s.top-r.top+e.target.offsetHeight/2)},c={x:i.x-(a.x-i.x),y:i.y-(a.y-i.y)};let l=!1,u=!0;const h=this.isNeedLockProportion(),d=e=>{if(u)return void(u=!1);l=!0;const s={x:e.clientX-Math.round(r.left),y:e.clientY-Math.round(r.top)};C(t,n,s,o,h,{center:i,curPoint:a,symmetricPoint:c}),this.$store.commit("setShapeStyle",n)},m=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m),l&&this.$store.commit("recordSnapshot")};document.addEventListener("mousemove",d),document.addEventListener("mouseup",m)},isNeedLockProportion(){if("Group"!=this.element.component)return!1;const t=[0,90,180,360];for(const e of this.element.propValue)if(!t.includes((0,d.KV)(parseInt(e.style.rotate))))return!0;return!1}}},k=E,O=n(3736),D=(0,O.Z)(k,c,l,!1,null,"4bd3ea14",null),A=D.exports,L=n(9748),P=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[e("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?e("li",{on:{click:t.unlock}},[t._v("解锁")]):[e("li",{on:{click:t.copy}},[t._v("复制")]),e("li",{on:{click:t.paste}},[t._v("粘贴")]),e("li",{on:{click:t.cut}},[t._v("剪切")]),e("li",{on:{click:t.deleteComponent}},[t._v("删除")]),e("li",{on:{click:t.lock}},[t._v("锁定")]),e("li",{on:{click:t.topComponent}},[t._v("置顶")]),e("li",{on:{click:t.bottomComponent}},[t._v("置底")]),e("li",{on:{click:t.upComponent}},[t._v("上移")]),e("li",{on:{click:t.downComponent}},[t._v("下移")])]]:e("li",{on:{click:t.paste}},[t._v("粘贴")])],2)])},$=[],_={data(){return{copyData:null}},computed:(0,a.rn)(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},R=_,T=(0,O.Z)(R,P,$,!1,null,"ff223a58",null),N=T.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mark-line"},t._l(t.lines,(function(n){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[n]||!1,expression:"lineStatus[line] || false"}],key:n,ref:n,refInFor:!0,staticClass:"line",class:n.includes("x")?"xline":"yline"})})),0)},M=[],I={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:(0,a.rn)(["curComponent","componentData"]),mounted(){u.Z.$on("move",((t,e)=>{this.showLine(t,e)})),u.Z.$on("unmove",(()=>{this.hideLine()}))},methods:{hideLine(){Object.keys(this.lineStatus).forEach((t=>{this.lineStatus[t]=!1}))},showLine(t,e){const n=this.$refs,o=this.componentData,i=(0,L.fg)(this.curComponent.style),r=i.width/2,s=i.height/2;this.hideLine(),o.forEach((o=>{if(o==this.curComponent)return;const a=(0,L.fg)(o.style),{top:c,left:l,bottom:u,right:h}=a,d=a.width/2,m=a.height/2,p={top:[{isNearly:this.isNearly(i.top,c),lineNode:n.xt[0],line:"xt",dragShift:c,lineShift:c},{isNearly:this.isNearly(i.bottom,c),lineNode:n.xt[0],line:"xt",dragShift:c-i.height,lineShift:c},{isNearly:this.isNearly(i.top+s,c+m),lineNode:n.xc[0],line:"xc",dragShift:c+m-s,lineShift:c+m},{isNearly:this.isNearly(i.top,u),lineNode:n.xb[0],line:"xb",dragShift:u,lineShift:u},{isNearly:this.isNearly(i.bottom,u),lineNode:n.xb[0],line:"xb",dragShift:u-i.height,lineShift:u}],left:[{isNearly:this.isNearly(i.left,l),lineNode:n.yl[0],line:"yl",dragShift:l,lineShift:l},{isNearly:this.isNearly(i.right,l),lineNode:n.yl[0],line:"yl",dragShift:l-i.width,lineShift:l},{isNearly:this.isNearly(i.left+r,l+d),lineNode:n.yc[0],line:"yc",dragShift:l+d-r,lineShift:l+d},{isNearly:this.isNearly(i.left,h),lineNode:n.yr[0],line:"yr",dragShift:h,lineShift:h},{isNearly:this.isNearly(i.right,h),lineNode:n.yr[0],line:"yr",dragShift:h-i.width,lineShift:h}]},f=[],{rotate:g}=this.curComponent.style;Object.keys(p).forEach((t=>{p[t].forEach((e=>{e.isNearly&&(this.$store.commit("setShapeSingleStyle",{key:t,value:0!=g?this.translatecurComponentShift(t,e,i):e.dragShift}),e.lineNode.style[t]=`${e.lineShift}px`,f.push(e.line))}))})),f.length&&this.chooseTheTureLine(f,t,e)}))},translatecurComponentShift(t,e,n){const{width:o,height:i}=this.curComponent.style;return"top"==t?Math.round(e.dragShift-(i-n.height)/2):Math.round(e.dragShift-(o-n.width)/2)},chooseTheTureLine(t,e,n){n?t.includes("yr")?this.lineStatus.yr=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yl")&&(this.lineStatus.yl=!0):t.includes("yl")?this.lineStatus.yl=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yr")&&(this.lineStatus.yr=!0),e?t.includes("xb")?this.lineStatus.xb=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xt")&&(this.lineStatus.xt=!0):t.includes("xt")?this.lineStatus.xt=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xb")&&(this.lineStatus.xb=!0)},isNearly(t,e){return Math.abs(t-e)<=this.diff}}},U=I,Z=(0,O.Z)(U,j,M,!1,null,"475239c0",null),B=Z.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},V=[],z={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},q=z,H=(0,O.Z)(q,F,V,!1,null,"30e7b1c2",null),W=H.exports,Y=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[e("defs",[e("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[e("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),e("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[e("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),e("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),e("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},X=[],G={},J=(0,O.Z)(G,Y,X,!1,null,"39ef9482",null),K=J.exports,Q={components:{Shape:A,ContextMenu:N,MarkLine:B,Area:W,Grid:K},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:(0,a.rn)(["componentData","curComponent","canvasStyleData","editor"]),mounted(){this.$store.commit("getEditor"),u.Z.$on("hideArea",(()=>{this.hideArea()}))},methods:{getShapeStyle:L.B$,getCanvasStyle:L.$i,changeStyleWithScale:d.EY,handleMouseDown(t){this.curComponent&&!(0,x.rc)(this.curComponent.component)||t.preventDefault(),this.hideArea();const e=this.editor.getBoundingClientRect();this.editorX=e.x,this.editorY=e.y;const n=t.clientX,o=t.clientY;this.start.x=n-this.editorX,this.start.y=o-this.editorY,this.isShowArea=!0;const i=t=>{this.width=Math.abs(t.clientX-n),this.height=Math.abs(t.clientY-o),t.clientX<n&&(this.start.x=t.clientX-this.editorX),t.clientY<o&&(this.start.y=t.clientY-this.editorY)},r=t=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),t.clientX!=n||t.clientY!=o?this.createGroup():this.hideArea()};document.addEventListener("mousemove",i),document.addEventListener("mouseup",r)},hideArea(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup(){const t=this.getSelectArea();if(t.length<=1)return void this.hideArea();let e=1/0,n=1/0,o=-1/0,i=-1/0;t.forEach((t=>{let r={};"Group"==t.component?t.propValue.forEach((t=>{const s=(0,x.$)(`#component${t.id}`).getBoundingClientRect();r.left=s.left-this.editorX,r.top=s.top-this.editorY,r.right=s.right-this.editorX,r.bottom=s.bottom-this.editorY,r.left<n&&(n=r.left),r.top<e&&(e=r.top),r.right>o&&(o=r.right),r.bottom>i&&(i=r.bottom)})):r=(0,L.fg)(t.style),r.left<n&&(n=r.left),r.top<e&&(e=r.top),r.right>o&&(o=r.right),r.bottom>i&&(i=r.bottom)})),this.start.x=n,this.start.y=e,this.width=o-n,this.height=i-e,this.$store.commit("setAreaData",{style:{left:n,top:e,width:this.width,height:this.height},components:t})},getSelectArea(){const t=[],{x:e,y:n}=this.start;return this.componentData.forEach((o=>{if(o.isLock)return;const{left:i,top:r,width:s,height:a}=(0,L.fg)(o.style);e<=i&&n<=r&&i+s<=e+this.width&&r+a<=n+this.height&&t.push(o)})),t},handleContextMenu(t){t.stopPropagation(),t.preventDefault();let e=t.target,n=t.offsetY,o=t.offsetX;while(e instanceof SVGElement)e=e.parentNode;while(!e.className.includes("editor"))o+=e.offsetLeft,n+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getComponentStyle(t){return(0,L.C2)(t,this.svgFilterAttrs)},getSVGStyle(t){return(0,L.WF)(t,this.svgFilterAttrs)},handleInput(t,e){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(t,e)})},getTextareaHeight(t,e){let{lineHeight:n,fontSize:o,height:i}=t.style;""===n&&(n=1.5);const r=(e.split("<br>").length-1)*n*(o||this.canvasStyleData.fontSize);return i>r?i:r}}},tt=Q,et=(0,O.Z)(tt,r,s,!1,null,"8297a0de",null),nt=et.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(n,o){return e("div",{key:o,staticClass:"list",attrs:{draggable:"","data-index":o}},[e("span",{staticClass:"iconfont",class:"icon-"+n.icon}),e("span",{staticClass:"btn_name"},[t._v(t._s(n.label))])])})),0)},it=[],rt=n(6845),st={data(){return{componentList:rt.ZP}},methods:{handleDragStart(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},at=st,ct=(0,O.Z)(at,ot,it,!1,null,"3fed611d",null),lt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"animation-list"},[e("div",{staticClass:"div-animation"},[e("el-button",{on:{click:function(e){t.isShowAnimation=!0}}},[t._v("添加动画")]),e("el-button",{on:{click:t.previewAnimate}},[t._v("预览动画")]),e("div",t._l(t.curComponent.animations,(function(n,o){return e("el-tag",{key:o,attrs:{closable:""},on:{close:function(e){return t.removeAnimation(o)}}},[t._v(" "+t._s(n.label)+" "),e("i",{staticClass:"cursor el-icon-setting",on:{click:function(e){return t.handleAnimationSetting(o)}}})])})),1)],1),e("Modal",{model:{value:t.isShowAnimation,callback:function(e){t.isShowAnimation=e},expression:"isShowAnimation"}},[e("el-tabs",{model:{value:t.animationActiveName,callback:function(e){t.animationActiveName=e},expression:"animationActiveName"}},t._l(t.animationClassData,(function(n){return e("el-tab-pane",{key:n.label,attrs:{label:n.label,name:n.label}},[e("el-scrollbar",{staticClass:"animate-container"},t._l(n.children,(function(n){return e("div",{key:n.value,ref:n.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(e){return t.runAnimation(n)},click:function(e){return t.addAnimation(n)}}},[e("div",[t._v(" "+t._s(n.label)+" ")])])})),0)],1)})),1)],1),t.isShowAnimationSetting?e("AnimationSettingModal",{attrs:{"cur-index":t.curIndex},on:{close:function(e){t.isShowAnimationSetting=!1}}}):t._e()],1)},ht=[],dt=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"modal-bg",on:{click:t.hide}},[e("div",{staticClass:"fadeInLeft animated modal",on:{click:t.stopPropagation}},[t._t("default")],2)]):t._e()},mt=[],pt={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide(){this.$emit("change")},stopPropagation(t){t.stopPropagation()}}},ft=pt,gt=(0,O.Z)(ft,dt,mt,!1,null,"057883e4",null),vt=gt.exports;const yt=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];yt.forEach((t=>{t.children.forEach((t=>{t.pending=!1,t.animationTime=1}))}));var bt=yt,wt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:`${t.config.label} 动画配置`,visible:t.centerDialogVisible,width:"30%",center:""},on:{close:t.handleCloseModal}},[e("div",{staticClass:"time"},[t._v(" 动画时长："),e("el-input-number",{attrs:{"controls-position":"right",min:.1,precision:2,step:.01},model:{value:t.config.animationTime,callback:function(e){t.$set(t.config,"animationTime",e)},expression:"config.animationTime"}})],1),e("div",{staticClass:"loop"},[t._v(" 是否循环："),e("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:t.isDisabled},model:{value:t.config.isLoop,callback:function(e){t.$set(t.config,"isLoop",e)},expression:"config.isLoop"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleCloseModal}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveSetting}},[t._v("确 定")])],1)])},St=[],Ct={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data(){return{centerDialogVisible:!0,config:{}}},computed:{...(0,a.rn)(["curComponent"]),isDisabled(){return this.curComponent.animations.length>1}},created(){const{label:t,animationTime:e,isLoop:n=!1,value:o}=this.curComponent.animations[this.curIndex]||{};this.config={animationTime:e,label:t,isLoop:n,value:o}},methods:{handleCloseModal(){this.$emit("close")},handleSaveSetting(){const{isLoop:t}=this.config;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:t}}),u.Z.$emit("stopAnimation"),this.handleCloseModal()}}},xt=Ct,Et=(0,O.Z)(xt,wt,St,!1,null,"043aa3fa",null),kt=Et.exports,Ot={components:{Modal:vt,AnimationSettingModal:kt},data(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:bt,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:(0,a.rn)(["curComponent"]),methods:{addAnimation(t){this.$store.commit("addAnimation",t),this.isShowAnimation=!1},previewAnimate(){u.Z.$emit("runAnimation")},removeAnimation(t){this.$store.commit("removeAnimation",t),this.curComponent.animations.length||u.Z.$emit("stopAnimation")},handleAnimationSetting(t){this.isShowAnimationSetting=!0,this.curIndex=t},async runAnimation(t){t.pending||(t.pending=!0,await(0,h.Z)(this.$refs[t.value][0],[t]),setTimeout((()=>{t.pending=!1}),100))}}},Dt=Ot,At=(0,O.Z)(Dt,ut,ht,!1,null,null,null),Lt=At.exports,Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"event-list"},[e("div",{staticClass:"div-events"},[e("el-button",{on:{click:function(e){t.isShowEvent=!0}}},[t._v("添加事件")]),e("div",t._l(Object.keys(t.curComponent.events),(function(n){return e("el-tag",{key:n,attrs:{closable:""},on:{close:function(e){return t.removeEvent(n)}}},[t._v(" "+t._s(n)+" ")])})),1)],1),e("Modal",{model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}},[e("el-tabs",{model:{value:t.eventActiveName,callback:function(e){t.eventActiveName=e},expression:"eventActiveName"}},t._l(t.eventList,(function(n){return e("el-tab-pane",{key:n.key,staticStyle:{padding:"0 20px"},attrs:{label:n.label,name:n.key}},["redirect"==n.key?e("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:n.param,callback:function(e){t.$set(n,"param",e)},expression:"item.param"}}):t._e(),"alert"==n.key?e("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:n.param,callback:function(e){t.$set(n,"param",e)},expression:"item.param"}}):t._e(),e("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(e){return t.addEvent(n.key,n.param)}}},[t._v("确定")])],1)})),1)],1)],1)},$t=[],_t=n(6683),Rt={components:{Modal:vt},data(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:_t.oQ}},computed:(0,a.rn)(["curComponent"]),methods:{addEvent(t,e){this.isShowEvent=!1,this.$store.commit("addEvent",{event:t,param:e})},removeEvent(t){this.$store.commit("removeEvent",t)}}},Tt=Rt,Nt=(0,O.Z)(Tt,Pt,$t,!1,null,"07377f5c",null),jt=Nt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"toolbar"},[e("el-button",{on:{click:t.undo}},[t._v("撤消")]),e("el-button",{on:{click:t.redo}},[t._v("重做")]),e("label",{staticClass:"insert",attrs:{for:"input"}},[t._v(" 插入图片 "),e("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:t.handleFileChange}})]),e("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.preview(!1)}}},[t._v("预览")]),e("el-button",{on:{click:t.save}},[t._v("保存")]),e("el-button",{on:{click:t.clearCanvas}},[t._v("清空画布")]),e("el-button",{attrs:{disabled:!t.areaData.components.length},on:{click:t.compose}},[t._v("组合")]),e("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock||"Group"!=t.curComponent.component},on:{click:t.decompose}},[t._v(" 拆分 ")]),e("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock},on:{click:t.lock}},[t._v("锁定")]),e("el-button",{attrs:{disabled:!t.curComponent||!t.curComponent.isLock},on:{click:t.unlock}},[t._v("解锁")]),e("el-button",{on:{click:function(e){return t.preview(!0)}}},[t._v("截图")]),e("div",{staticClass:"canvas-config"},[e("span",[t._v("画布大小")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"width",e.target.value)}}}),e("span",[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"height",e.target.value)}}})]),e("div",{staticClass:"canvas-config"},[e("span",[t._v("画布比例")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],domProps:{value:t.scale},on:{input:[function(e){e.target.composing||(t.scale=e.target.value)},t.handleScaleChange]}}),t._v(" % ")])],1),t.isShowPreview?e("Preview",{attrs:{"is-screenshot":t.isScreenshot},on:{close:t.handlePreviewChange}}):t._e()],1)},It=[],Ut=n(1840),Zt=n(9330),Bt=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"bg"},[t.isScreenshot?e("el-button",{staticClass:"close",on:{click:t.htmlToImage}},[t._v("确定")]):e("el-button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]),e("div",{staticClass:"canvas-container"},[e("div",{staticClass:"canvas",style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}},t._l(t.copyData,(function(t,n){return e("ComponentWrapper",{key:n,attrs:{config:t}})})),1)])],1)},Ft=[],Vt=n(1007),zt=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};const qt="application/font-woff",Ht="image/jpeg",Wt={woff:qt,woff2:qt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ht,jpeg:Ht,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function Yt(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Xt(t){const e=Yt(t).toLowerCase();return Wt[e]||""}function Gt(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),e&&(o.href=e),i.href=t,i.href}function Jt(t){return-1!==t.search(/^(data:)/)}function Kt(t,e){return`data:${e};base64,${t}`}function Qt(t){return t.split(/,/)[1]}const te=function(){let t=0;const e=()=>`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)}();function ee(t){const e=[];for(let n=0,o=t.length;n<o;n+=1)e.push(t[n]);return e}function ne(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function oe(t){const e=ne(t,"border-left-width"),n=ne(t,"border-right-width");return t.clientWidth+e+n}function ie(t){const e=ne(t,"border-top-width"),n=ne(t,"border-bottom-width");return t.clientHeight+e+n}function re(){let t,e;try{e=process}catch(o){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function se(t){return new Promise(((e,n)=>{const o=new Image;o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="sync",o.src=t}))}function ae(t){return zt(this,void 0,void 0,(function*(){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}))}function ce(t,e,n){return zt(this,void 0,void 0,(function*(){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),i.appendChild(r),r.appendChild(t),ae(i)}))}const le={};function ue(t){let e=t.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(e)&&(e=e.replace(/.*\//,"")),e}function he(t,e){const n=ue(t);if(null!=le[n])return le[n];e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());const o=n=>{let o="";if(e.imagePlaceholder){const t=e.imagePlaceholder.split(/,/);t&&t[1]&&(o=t[1])}let i=`Failed to fetch resource: ${t}`;return n&&(i="string"===typeof n?n:n.message),i&&console.error(i),{blob:o,contentType:""}},i=window.fetch(t).then((t=>t.blob().then((e=>({blob:e,contentType:t.headers.get("Content-Type")||""}))))).then((({blob:t,contentType:e})=>new Promise(((n,o)=>{const i=new FileReader;i.onloadend=()=>n({contentType:e,blob:i.result}),i.onerror=o,i.readAsDataURL(t)})))).then((({blob:t,contentType:e})=>({contentType:e,blob:Qt(t)}))).catch(o);return le[n]=i,i}function de(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function me(t){return ee(t).map((e=>{const n=t.getPropertyValue(e),o=t.getPropertyPriority(e);return`${e}: ${n}${o?" !important":""};`})).join(" ")}function pe(t,e,n){const o=`.${t}:${e}`,i=n.cssText?de(n):me(n);return document.createTextNode(`${o}{${i}}`)}function fe(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const r=te();try{e.className=`${e.className} ${r}`}catch(a){return}const s=document.createElement("style");s.appendChild(pe(r,n,o)),e.appendChild(s)}function ge(t,e){fe(t,e,":before"),fe(t,e,":after")}var ve=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};function ye(t){return ve(this,void 0,void 0,(function*(){const e=t.toDataURL();return"data:,"===e?Promise.resolve(t.cloneNode(!1)):se(e)}))}function be(t,e){return ve(this,void 0,void 0,(function*(){return Promise.resolve(t.poster).then((t=>he(t,e))).then((e=>Kt(e.blob,Xt(t.poster)||e.contentType))).then((t=>se(t)))}))}function we(t,e){return ve(this,void 0,void 0,(function*(){return t instanceof HTMLCanvasElement?ye(t):t instanceof HTMLVideoElement&&t.poster?be(t,e):Promise.resolve(t.cloneNode(!1))}))}const Se=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function Ce(t,e,n){var o;return ve(this,void 0,void 0,(function*(){const i=Se(t)&&t.assignedNodes?ee(t.assignedNodes()):ee((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes);return 0===i.length||t instanceof HTMLVideoElement?Promise.resolve(e):i.reduce(((t,o)=>t.then((()=>Oe(o,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()).then((()=>e))}))}function xe(t,e){const n=window.getComputedStyle(t),o=e.style;o&&(n.cssText?o.cssText=n.cssText:ee(n).forEach((t=>{o.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))})))}function Ee(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function ke(t,e){return ve(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve().then((()=>xe(t,e))).then((()=>ge(t,e))).then((()=>Ee(t,e))).then((()=>e)):Promise.resolve(e)}))}function Oe(t,e,n){return ve(this,void 0,void 0,(function*(){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>we(t,e))).then((n=>Ce(t,n,e))).then((e=>ke(t,e))):Promise.resolve(null)}))}var De=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};const Ae=/url\((['"]?)([^'"]+?)\1\)/g,Le=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,Pe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function $e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function _e(t){const e=[];return t.replace(Ae,((t,n,o)=>(e.push(o),t))),e.filter((t=>!Jt(t)))}function Re(t,e,n,o,i){const r=n?Gt(e,n):e;return Promise.resolve(r).then((t=>i?i(t):he(t,o))).then((t=>"string"===typeof t?Kt(t,Xt(e)):Kt(t.blob,Xt(e)||t.contentType))).then((n=>t.replace($e(e),`$1${n}$3`))).then((t=>t),(()=>r))}function Te(t,{preferredFontFormat:e}){return e?t.replace(Pe,(t=>{while(1){const[n,,o]=Le.exec(t)||[];if(!o)return"";if(o===e)return`src: ${n};`}})):t}function Ne(t){return-1!==t.search(Ae)}function je(t,e,n){return De(this,void 0,void 0,(function*(){if(!Ne(t))return Promise.resolve(t);const o=Te(t,n);return Promise.resolve(o).then(_e).then((t=>t.reduce(((t,o)=>t.then((t=>Re(t,o,e,n)))),Promise.resolve(o))))}))}var Me=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};function Ie(t,e){var n;return Me(this,void 0,void 0,(function*(){const o=null===(n=t.style)||void 0===n?void 0:n.getPropertyValue("background");return o?Promise.resolve(o).then((t=>je(t,null,e))).then((e=>(t.style.setProperty("background",e,t.style.getPropertyPriority("background")),t))):Promise.resolve(t)}))}function Ue(t,e){return Me(this,void 0,void 0,(function*(){if((!(t instanceof HTMLImageElement)||Jt(t.src))&&(!(t instanceof SVGImageElement)||Jt(t.href.baseVal)))return Promise.resolve(t);const n=t instanceof HTMLImageElement?t.src:t.href.baseVal;return Promise.resolve(n).then((t=>he(t,e))).then((t=>Kt(t.blob,Xt(n)||t.contentType))).then((e=>new Promise(((n,o)=>{t.onload=n,t.onerror=o,t instanceof HTMLImageElement?(t.srcset="",t.src=e):t.href.baseVal=e})))).then((()=>t),(()=>t))}))}function Ze(t,e){return Me(this,void 0,void 0,(function*(){const n=ee(t.childNodes),o=n.map((t=>Be(t,e)));return Promise.all(o).then((()=>t))}))}function Be(t,e){return Me(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve(t).then((t=>Ie(t,e))).then((t=>Ue(t,e))).then((t=>Ze(t,e))):Promise.resolve(t)}))}function Fe(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const o=e.style;return null!=o&&Object.keys(o).forEach((t=>{n[t]=o[t]})),t}var Ve=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};const ze={};function qe(t){const e=ze[t];if(null!=e)return e;const n=window.fetch(t).then((e=>({url:t,cssText:e.text()})));return ze[t]=n,n}function He(t){return Ve(this,void 0,void 0,(function*(){return t.cssText.then((e=>{let n=e;const o=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],r=i.map((e=>{let i=e.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),window.fetch(i).then((t=>t.blob())).then((t=>new Promise(((o,i)=>{const r=new FileReader;r.onloadend=()=>{n=n.replace(e,`url(${r.result})`),o([e,r.result])},r.onerror=i,r.readAsDataURL(t)}))))}));return Promise.all(r).then((()=>n))}))}))}function We(t){if(null==t)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const t=i.exec(o);if(null===t)break;e.push(t[0])}o=o.replace(i,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");while(1){let t=r.exec(o);if(null===t){if(t=a.exec(o),null===t)break;r.lastIndex=a.lastIndex}else a.lastIndex=r.lastIndex;e.push(t[0])}return e}function Ye(t){return Ve(this,void 0,void 0,(function*(){const e=[],n=[];return t.forEach((e=>{if("cssRules"in e)try{ee(e.cssRules).forEach(((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let i=o+1;const r=t.href,s=qe(r).then((t=>t?He(t):"")).then((t=>We(t).forEach((t=>{try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:t,error:n})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));n.push(s)}}))}catch(o){const i=t.find((t=>null==t.href))||document.styleSheets[0];null!=e.href&&n.push(qe(e.href).then((t=>t?He(t):"")).then((t=>We(t).forEach((t=>{i.insertRule(t,e.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t.toString())}))),console.error("Error inlining remote css file",o.toString())}})),Promise.all(n).then((()=>(t.forEach((t=>{if("cssRules"in t)try{ee(t.cssRules).forEach((t=>{e.push(t)}))}catch(n){console.error(`Error while reading CSS rules from ${t.href}`,n.toString())}})),e)))}))}function Xe(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>Ne(t.style.getPropertyValue("src"))))}function Ge(t){return Ve(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{null==t.ownerDocument&&n(new Error("Provided element is not within a Document")),e(ee(t.ownerDocument.styleSheets))})).then((t=>Ye(t))).then(Xe)}))}function Je(t,e){return Ve(this,void 0,void 0,(function*(){return Ge(t).then((t=>Promise.all(t.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return je(t.cssText,n,e)}))))).then((t=>t.join("\n")))}))}function Ke(t,e){return Ve(this,void 0,void 0,(function*(){return(null!=e.fontEmbedCSS?Promise.resolve(e.fontEmbedCSS):Je(t,e)).then((e=>{const n=document.createElement("style"),o=document.createTextNode(e);return n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),t}))}))}var Qe=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((o=o.apply(t,e||[])).next())}))};function tn(t,e={}){const n=e.width||oe(t),o=e.height||ie(t);return{width:n,height:o}}function en(t,e={}){return Qe(this,void 0,void 0,(function*(){const{width:n,height:o}=tn(t,e);return Promise.resolve(t).then((t=>Oe(t,e,!0))).then((t=>Ke(t,e))).then((t=>Be(t,e))).then((t=>Fe(t,e))).then((t=>ce(t,n,o)))}))}const nn=16384;function on(t){(t.width>nn||t.height>nn)&&(t.width>nn&&t.height>nn?t.width>t.height?(t.height*=nn/t.width,t.width=nn):(t.width*=nn/t.height,t.height=nn):t.width>nn?(t.height*=nn/t.width,t.width=nn):(t.width*=nn/t.height,t.height=nn))}function rn(t,e={}){return Qe(this,void 0,void 0,(function*(){return en(t,e).then(se).then((n=>{const o=document.createElement("canvas"),i=o.getContext("2d"),r=e.pixelRatio||re(),{width:s,height:a}=tn(t,e),c=e.canvasWidth||s,l=e.canvasHeight||a;return o.width=c*r,o.height=l*r,e.skipAutoScale||on(o),o.style.width=`${c}`,o.style.height=`${l}`,e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(n,0,0,o.width,o.height),o}))}))}function sn(t,e={}){return Qe(this,void 0,void 0,(function*(){return rn(t,e).then((t=>t.toDataURL()))}))}var an={components:{ComponentWrapper:Vt.Z},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[]}},computed:(0,a.rn)(["componentData","canvasStyleData"]),created(){this.$set(this,"copyData",(0,x.p$)(this.componentData))},methods:{getStyle:L.C2,getCanvasStyle:L.$i,changeStyleWithScale:d.EY,close(){this.$emit("close")},htmlToImage(){sn(this.$refs.container.querySelector(".canvas")).then((t=>{const e=document.createElement("a");e.setAttribute("download","screenshot"),e.href=t,e.click()})).catch((t=>{console.error("oops, something went wrong!",t)})).finally(this.close)}}},cn=an,ln=(0,O.Z)(cn,Bt,Ft,!1,null,"1b4c1f1a",null),un=ln.exports,hn=n(8867),dn=n(715);const mn=["top","left","width","height","fontSize"];function pn(t){const e=(0,x.p$)(hn.Z.state.componentData);e.forEach((e=>{Object.keys(e.style).forEach((n=>{if(mn.includes(n)){if("fontSize"===n&&""===e.style[n])return;e.style[n]=vn(yn(e.style[n],hn.Z.state.canvasStyleData.scale),t)}}))})),hn.Z.commit("setComponentData",e),hn.Z.commit("setCurComponent",{component:e[hn.Z.state.curComponentIndex],index:hn.Z.state.curComponentIndex}),hn.Z.commit("setCanvasStyle",{...hn.Z.state.canvasStyleData,scale:t})}const fn=["width","height","fontSize"];function gn(t){Object.keys(t.style).forEach((e=>{if(fn.includes(e)){if("fontSize"===e&&""===t.style[e])return;t.style[e]=vn(t.style[e],hn.Z.state.canvasStyleData.scale)}}))}function vn(t,e){return(0,dn.JpY)(t,(0,dn.csF)(parseFloat(e),100))}function yn(t,e){return(0,dn.csF)(t,(0,dn.csF)(parseFloat(e),100))}function bn(t,e){return function(){return t.apply(e,arguments)}}const{toString:wn}=Object.prototype,{getPrototypeOf:Sn}=Object,Cn=(t=>e=>{const n=wn.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xn=t=>(t=t.toLowerCase(),e=>Cn(e)===t),En=t=>e=>typeof e===t,{isArray:kn}=Array,On=En("undefined");function Dn(t){return null!==t&&!On(t)&&null!==t.constructor&&!On(t.constructor)&&$n(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const An=xn("ArrayBuffer");function Ln(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&An(t.buffer),e}const Pn=En("string"),$n=En("function"),_n=En("number"),Rn=t=>null!==t&&"object"===typeof t,Tn=t=>!0===t||!1===t,Nn=t=>{if("object"!==Cn(t))return!1;const e=Sn(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jn=xn("Date"),Mn=xn("File"),In=xn("Blob"),Un=xn("FileList"),Zn=t=>Rn(t)&&$n(t.pipe),Bn=t=>{const e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||wn.call(t)===e||$n(t.toString)&&t.toString()===e)},Fn=xn("URLSearchParams"),Vn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zn(t,e,{allOwnKeys:n=!1}={}){if(null===t||"undefined"===typeof t)return;let o,i;if("object"!==typeof t&&(t=[t]),kn(t))for(o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),r=i.length;let s;for(o=0;o<r;o++)s=i[o],e.call(null,t[s],s,t)}}function qn(){const t={},e=(e,n)=>{Nn(t[n])&&Nn(e)?t[n]=qn(t[n],e):Nn(e)?t[n]=qn({},e):kn(e)?t[n]=e.slice():t[n]=e};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&zn(arguments[n],e);return t}const Hn=(t,e,n,{allOwnKeys:o}={})=>(zn(e,((e,o)=>{n&&$n(e)?t[o]=bn(e,n):t[o]=e}),{allOwnKeys:o}),t),Wn=t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),Yn=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Xn=(t,e,n,o)=>{let i,r,s;const a={};if(e=e||{},null==t)return e;do{i=Object.getOwnPropertyNames(t),r=i.length;while(r-- >0)s=i[r],o&&!o(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&Sn(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Gn=(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return-1!==o&&o===n},Jn=t=>{if(!t)return null;if(kn(t))return t;let e=t.length;if(!_n(e))return null;const n=new Array(e);while(e-- >0)n[e]=t[e];return n},Kn=(t=>e=>t&&e instanceof t)("undefined"!==typeof Uint8Array&&Sn(Uint8Array)),Qn=(t,e)=>{const n=t&&t[Symbol.iterator],o=n.call(t);let i;while((i=o.next())&&!i.done){const n=i.value;e.call(t,n[0],n[1])}},to=(t,e)=>{let n;const o=[];while(null!==(n=t.exec(e)))o.push(n);return o},eo=xn("HTMLFormElement"),no=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),oo=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),io=xn("RegExp"),ro=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};zn(n,((n,i)=>{!1!==e(n,i,t)&&(o[i]=n)})),Object.defineProperties(t,o)},so=t=>{ro(t,((e,n)=>{const o=t[n];$n(o)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not read-only method '"+n+"'")}))}))},ao=(t,e)=>{const n={},o=t=>{t.forEach((t=>{n[t]=!0}))};return kn(t)?o(t):o(String(t).split(e)),n},co=()=>{},lo=(t,e)=>(t=+t,Number.isFinite(t)?t:e);var uo={isArray:kn,isArrayBuffer:An,isBuffer:Dn,isFormData:Bn,isArrayBufferView:Ln,isString:Pn,isNumber:_n,isBoolean:Tn,isObject:Rn,isPlainObject:Nn,isUndefined:On,isDate:jn,isFile:Mn,isBlob:In,isRegExp:io,isFunction:$n,isStream:Zn,isURLSearchParams:Fn,isTypedArray:Kn,isFileList:Un,forEach:zn,merge:qn,extend:Hn,trim:Vn,stripBOM:Wn,inherits:Yn,toFlatObject:Xn,kindOf:Cn,kindOfTest:xn,endsWith:Gn,toArray:Jn,forEachEntry:Qn,matchAll:to,isHTMLForm:eo,hasOwnProperty:oo,hasOwnProp:oo,reduceDescriptors:ro,freezeMethods:so,toObjectSet:ao,toCamelCase:no,noop:co,toFiniteNumber:lo};function ho(t,e,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}uo.inherits(ho,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mo=ho.prototype,po={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{po[t]={value:t}})),Object.defineProperties(ho,po),Object.defineProperty(mo,"isAxiosError",{value:!0}),ho.from=(t,e,n,o,i,r)=>{const s=Object.create(mo);return uo.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),ho.call(s,t.message,e,n,o,i),s.cause=t,s.name=t.name,r&&Object.assign(s,r),s};var fo=ho,go=n(6230),vo=go;function yo(t){return uo.isPlainObject(t)||uo.isArray(t)}function bo(t){return uo.endsWith(t,"[]")?t.slice(0,-2):t}function wo(t,e,n){return t?t.concat(e).map((function(t,e){return t=bo(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}function So(t){return uo.isArray(t)&&!t.some(yo)}const Co=uo.toFlatObject(uo,{},null,(function(t){return/^is[A-Z]/.test(t)}));function xo(t){return t&&uo.isFunction(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator]}function Eo(t,e,n){if(!uo.isObject(t))throw new TypeError("target must be an object");e=e||new(vo||FormData),n=uo.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!uo.isUndefined(e[t])}));const o=n.metaTokens,i=n.visitor||u,r=n.dots,s=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,c=a&&xo(e);if(!uo.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(uo.isDate(t))return t.toISOString();if(!c&&uo.isBlob(t))throw new fo("Blob is not supported. Use a Buffer instead.");return uo.isArrayBuffer(t)||uo.isTypedArray(t)?c&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,i){let a=t;if(t&&!i&&"object"===typeof t)if(uo.endsWith(n,"{}"))n=o?n:n.slice(0,-2),t=JSON.stringify(t);else if(uo.isArray(t)&&So(t)||uo.isFileList(t)||uo.endsWith(n,"[]")&&(a=uo.toArray(t)))return n=bo(n),a.forEach((function(t,o){!uo.isUndefined(t)&&null!==t&&e.append(!0===s?wo([n],o,r):null===s?n:n+"[]",l(t))})),!1;return!!yo(t)||(e.append(wo(i,n,r),l(t)),!1)}const h=[],d=Object.assign(Co,{defaultVisitor:u,convertValue:l,isVisitable:yo});function m(t,n){if(!uo.isUndefined(t)){if(-1!==h.indexOf(t))throw Error("Circular reference detected in "+n.join("."));h.push(t),uo.forEach(t,(function(t,o){const r=!(uo.isUndefined(t)||null===t)&&i.call(e,t,uo.isString(o)?o.trim():o,n,d);!0===r&&m(t,n?n.concat(o):[o])})),h.pop()}}if(!uo.isObject(t))throw new TypeError("data must be an object");return m(t),e}var ko=Eo;function Oo(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Do(t,e){this._pairs=[],t&&ko(t,this,e)}const Ao=Do.prototype;Ao.append=function(t,e){this._pairs.push([t,e])},Ao.toString=function(t){const e=t?function(e){return t.call(this,e,Oo)}:Oo;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Lo=Do;function Po(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $o(t,e,n){if(!e)return t;const o=n&&n.encode||Po,i=n&&n.serialize;let r;if(r=i?i(e,n):uo.isURLSearchParams(e)?e.toString():new Lo(e,n).toString(o),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}class _o{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){uo.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}var Ro=_o,To={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},No="undefined"!==typeof URLSearchParams?URLSearchParams:Lo,jo=FormData;const Mo=(()=>{let t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)})();var Io={isBrowser:!0,classes:{URLSearchParams:No,FormData:jo,Blob:Blob},isStandardBrowserEnv:Mo,protocols:["http","https","file","blob","url","data"]};function Uo(t,e){return ko(t,new Io.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,o){return Io.isNode&&uo.isBuffer(t)?(this.append(e,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Zo(t){return uo.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}function Bo(t){const e={},n=Object.keys(t);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],e[r]=t[r];return e}function Fo(t){function e(t,n,o,i){let r=t[i++];const s=Number.isFinite(+r),a=i>=t.length;if(r=!r&&uo.isArray(o)?o.length:r,a)return uo.hasOwnProp(o,r)?o[r]=[o[r],n]:o[r]=n,!s;o[r]&&uo.isObject(o[r])||(o[r]=[]);const c=e(t,n,o[r],i);return c&&uo.isArray(o[r])&&(o[r]=Bo(o[r])),!s}if(uo.isFormData(t)&&uo.isFunction(t.entries)){const n={};return uo.forEachEntry(t,((t,o)=>{e(Zo(t),o,n,0)})),n}return null}var Vo=Fo;function zo(t,e,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(new fo("Request failed with status code "+n.status,[fo.ERR_BAD_REQUEST,fo.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}var qo=Io.isStandardBrowserEnv?function(){return{write:function(t,e,n,o,i,r){const s=[];s.push(t+"="+encodeURIComponent(e)),uo.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),uo.isString(o)&&s.push("path="+o),uo.isString(i)&&s.push("domain="+i),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Ho(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Wo(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Yo(t,e){return t&&!Ho(e)?Wo(t,e):e}var Xo=Io.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(n){let o=n;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(t){const e=uo.isString(t)?o(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return function(){return!0}}();function Go(t,e,n){fo.call(this,null==t?"canceled":t,fo.ERR_CANCELED,e,n),this.name="CanceledError"}uo.inherits(Go,fo,{__CANCEL__:!0});var Jo=Go;function Ko(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}const Qo=uo.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var ti=t=>{const e={};let n,o,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),o=t.substring(i+1).trim(),!n||e[n]&&Qo[n]||("set-cookie"===n?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)})),e};const ei=Symbol("internals"),ni=Symbol("defaults");function oi(t){return t&&String(t).trim().toLowerCase()}function ii(t){return!1===t||null==t?t:uo.isArray(t)?t.map(ii):String(t)}function ri(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;while(o=n.exec(t))e[o[1]]=o[2];return e}function si(t,e,n,o){return uo.isFunction(o)?o.call(this,e,n):uo.isString(e)?uo.isString(o)?-1!==e.indexOf(o):uo.isRegExp(o)?o.test(e):void 0:void 0}function ai(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}function ci(t,e){const n=uo.toCamelCase(" "+e);["get","set","has"].forEach((o=>{Object.defineProperty(t,o+n,{value:function(t,n,i){return this[o].call(this,e,t,n,i)},configurable:!0})}))}function li(t,e){e=e.toLowerCase();const n=Object.keys(t);let o,i=n.length;while(i-- >0)if(o=n[i],e===o.toLowerCase())return o;return null}function ui(t,e){t&&this.set(t),this[ni]=e||null}Object.assign(ui.prototype,{set:function(t,e,n){const o=this;function i(t,e,n){const i=oi(e);if(!i)throw new Error("header name must be a non-empty string");const r=li(o,i);(!r||!0===n||!1!==o[r]&&!1!==n)&&(o[r||e]=ii(t))}return uo.isPlainObject(t)?uo.forEach(t,((t,n)=>{i(t,n,e)})):i(e,t,n),this},get:function(t,e){if(t=oi(t),!t)return;const n=li(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return ri(t);if(uo.isFunction(e))return e.call(this,t,n);if(uo.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}},has:function(t,e){if(t=oi(t),t){const n=li(this,t);return!(!n||e&&!si(this,this[n],n,e))}return!1},delete:function(t,e){const n=this;let o=!1;function i(t){if(t=oi(t),t){const i=li(n,t);!i||e&&!si(n,n[i],i,e)||(delete n[i],o=!0)}}return uo.isArray(t)?t.forEach(i):i(t),o},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(t){const e=this,n={};return uo.forEach(this,((o,i)=>{const r=li(n,i);if(r)return e[r]=ii(o),void delete e[i];const s=t?ai(i):String(i).trim();s!==i&&delete e[i],e[s]=ii(o),n[s]=!0})),this},toJSON:function(t){const e=Object.create(null);return uo.forEach(Object.assign({},this[ni]||null,this),((n,o)=>{null!=n&&!1!==n&&(e[o]=t&&uo.isArray(n)?n.join(", "):n)})),e}}),Object.assign(ui,{from:function(t){return uo.isString(t)?new this(ti(t)):t instanceof this?t:new this(t)},accessor:function(t){const e=this[ei]=this[ei]={accessors:{}},n=e.accessors,o=this.prototype;function i(t){const e=oi(t);n[e]||(ci(o,t),n[e]=!0)}return uo.isArray(t)?t.forEach(i):i(t),this}}),ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),uo.freezeMethods(ui.prototype),uo.freezeMethods(ui);var hi=ui;function di(t,e){t=t||10;const n=new Array(t),o=new Array(t);let i,r=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),l=o[s];i||(i=c),n[r]=a,o[r]=c;let u=s,h=0;while(u!==r)h+=n[u++],u%=t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),c-i<e)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}}var mi=di;function pi(t,e){let n=0;const o=mi(50,250);return i=>{const r=i.loaded,s=i.lengthComputable?i.total:void 0,a=r-n,c=o(a),l=r<=s;n=r;const u={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&l?(s-r)/c:void 0};u[e?"download":"upload"]=!0,t(u)}}function fi(t){return new Promise((function(e,n){let o=t.data;const i=hi.from(t.headers).normalize(),r=t.responseType;let s;function a(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}uo.isFormData(o)&&Io.isStandardBrowserEnv&&i.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const l=Yo(t.baseURL,t.url);function u(){if(!c)return;const o=hi.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),i=r&&"text"!==r&&"json"!==r?c.response:c.responseText,s={data:i,status:c.status,statusText:c.statusText,headers:o,config:t,request:c};zo((function(t){e(t),a()}),(function(t){n(t),a()}),s),c=null}if(c.open(t.method.toUpperCase(),$o(l,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new fo("Request aborted",fo.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new fo("Network Error",fo.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const o=t.transitional||To;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new fo(e,o.clarifyTimeoutError?fo.ETIMEDOUT:fo.ECONNABORTED,t,c)),c=null},Io.isStandardBrowserEnv){const e=(t.withCredentials||Xo(l))&&t.xsrfCookieName&&qo.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===o&&i.setContentType(null),"setRequestHeader"in c&&uo.forEach(i.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),uo.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),r&&"json"!==r&&(c.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&c.addEventListener("progress",pi(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",pi(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{c&&(n(!e||e.type?new Jo(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const h=Ko(l);h&&-1===Io.protocols.indexOf(h)?n(new fo("Unsupported protocol "+h+":",fo.ERR_BAD_REQUEST,t)):c.send(o||null)}))}const gi={http:fi,xhr:fi};var vi={getAdapter:t=>{if(uo.isString(t)){const e=gi[t];if(!t)throw Error(uo.hasOwnProp(t)?`Adapter '${t}' is not available in the build`:`Can not resolve adapter '${t}'`);return e}if(!uo.isFunction(t))throw new TypeError("adapter is not a function");return t},adapters:gi};const yi={"Content-Type":"application/x-www-form-urlencoded"};function bi(){let t;return"undefined"!==typeof XMLHttpRequest?t=vi.getAdapter("xhr"):"undefined"!==typeof process&&"process"===uo.kindOf(process)&&(t=vi.getAdapter("http")),t}function wi(t,e,n){if(uo.isString(t))try{return(e||JSON.parse)(t),uo.trim(t)}catch(o){if("SyntaxError"!==o.name)throw o}return(n||JSON.stringify)(t)}const Si={transitional:To,adapter:bi(),transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=uo.isObject(t);i&&uo.isHTMLForm(t)&&(t=new FormData(t));const r=uo.isFormData(t);if(r)return o&&o?JSON.stringify(Vo(t)):t;if(uo.isArrayBuffer(t)||uo.isBuffer(t)||uo.isStream(t)||uo.isFile(t)||uo.isBlob(t))return t;if(uo.isArrayBufferView(t))return t.buffer;if(uo.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Uo(t,this.formSerializer).toString();if((s=uo.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return ko(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),wi(t)):t}],transformResponse:[function(t){const e=this.transitional||Si.transitional,n=e&&e.forcedJSONParsing,o="json"===this.responseType;if(t&&uo.isString(t)&&(n&&!this.responseType||o)){const n=e&&e.silentJSONParsing,r=!n&&o;try{return JSON.parse(t)}catch(i){if(r){if("SyntaxError"===i.name)throw fo.from(i,fo.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Io.classes.FormData,Blob:Io.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};uo.forEach(["delete","get","head"],(function(t){Si.headers[t]={}})),uo.forEach(["post","put","patch"],(function(t){Si.headers[t]=uo.merge(yi)}));var Ci=Si;function xi(t,e){const n=this||Ci,o=e||n,i=hi.from(o.headers);let r=o.data;return uo.forEach(t,(function(t){r=t.call(n,r,i.normalize(),e?e.status:void 0)})),i.normalize(),r}function Ei(t){return!(!t||!t.__CANCEL__)}function ki(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jo}function Oi(t){ki(t),t.headers=hi.from(t.headers),t.data=xi.call(t,t.transformRequest);const e=t.adapter||Ci.adapter;return e(t).then((function(e){return ki(t),e.data=xi.call(t,t.transformResponse,e),e.headers=hi.from(e.headers),e}),(function(e){return Ei(e)||(ki(t),e&&e.response&&(e.response.data=xi.call(t,t.transformResponse,e.response),e.response.headers=hi.from(e.response.headers))),Promise.reject(e)}))}function Di(t,e){e=e||{};const n={};function o(t,e){return uo.isPlainObject(t)&&uo.isPlainObject(e)?uo.merge(t,e):uo.isPlainObject(e)?uo.merge({},e):uo.isArray(e)?e.slice():e}function i(n){return uo.isUndefined(e[n])?uo.isUndefined(t[n])?void 0:o(void 0,t[n]):o(t[n],e[n])}function r(t){if(!uo.isUndefined(e[t]))return o(void 0,e[t])}function s(n){return uo.isUndefined(e[n])?uo.isUndefined(t[n])?void 0:o(void 0,t[n]):o(void 0,e[n])}function a(n){return n in e?o(t[n],e[n]):n in t?o(void 0,t[n]):void 0}const c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return uo.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){const e=c[t]||i,o=e(t);uo.isUndefined(o)&&e!==a||(n[t]=o)})),n}const Ai="1.1.3",Li={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Li[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Pi={};function $i(t,e,n){if("object"!==typeof t)throw new fo("options must be an object",fo.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;while(i-- >0){const r=o[i],s=e[r];if(s){const e=t[r],n=void 0===e||s(e,r,t);if(!0!==n)throw new fo("option "+r+" must be "+n,fo.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new fo("Unknown option "+r,fo.ERR_BAD_OPTION)}}Li.transitional=function(t,e,n){function o(t,e){return"[Axios v"+Ai+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,r)=>{if(!1===t)throw new fo(o(i," has been removed"+(e?" in "+e:"")),fo.ERR_DEPRECATED);return e&&!Pi[i]&&(Pi[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,r)}};var _i={assertOptions:$i,validators:Li};const Ri=_i.validators;class Ti{constructor(t){this.defaults=t,this.interceptors={request:new Ro,response:new Ro}}request(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=Di(this.defaults,e);const{transitional:n,paramsSerializer:o}=e;void 0!==n&&_i.assertOptions(n,{silentJSONParsing:Ri.transitional(Ri.boolean),forcedJSONParsing:Ri.transitional(Ri.boolean),clarifyTimeoutError:Ri.transitional(Ri.boolean)},!1),void 0!==o&&_i.assertOptions(o,{encode:Ri.function,serialize:Ri.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();const i=e.headers&&uo.merge(e.headers.common,e.headers[e.method]);i&&uo.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),e.headers=new hi(e.headers,i);const r=[];let s=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));const a=[];let c;this.interceptors.response.forEach((function(t){a.push(t.fulfilled,t.rejected)}));let l,u=0;if(!s){const t=[Oi.bind(this),void 0];t.unshift.apply(t,r),t.push.apply(t,a),l=t.length,c=Promise.resolve(e);while(u<l)c=c.then(t[u++],t[u++]);return c}l=r.length;let h=e;u=0;while(u<l){const t=r[u++],e=r[u++];try{h=t(h)}catch(d){e.call(this,d);break}}try{c=Oi.call(this,h)}catch(d){return Promise.reject(d)}u=0,l=a.length;while(u<l)c=c.then(a[u++],a[u++]);return c}getUri(t){t=Di(this.defaults,t);const e=Yo(t.baseURL,t.url);return $o(e,t.params,t.paramsSerializer)}}uo.forEach(["delete","get","head","options"],(function(t){Ti.prototype[t]=function(e,n){return this.request(Di(n||{},{method:t,url:e,data:(n||{}).data}))}})),uo.forEach(["post","put","patch"],(function(t){function e(e){return function(n,o,i){return this.request(Di(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Ti.prototype[t]=e(),Ti.prototype[t+"Form"]=e(!0)}));var Ni=Ti;class ji{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;while(e-- >0)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const o=new Promise((t=>{n.subscribe(t),e=t})).then(t);return o.cancel=function(){n.unsubscribe(e)},o},t((function(t,o,i){n.reason||(n.reason=new Jo(t,o,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new ji((function(e){t=e}));return{token:e,cancel:t}}}var Mi=ji;function Ii(t){return function(e){return t.apply(null,e)}}function Ui(t){return uo.isObject(t)&&!0===t.isAxiosError}function Zi(t){const e=new Ni(t),n=bn(Ni.prototype.request,e);return uo.extend(n,Ni.prototype,e,{allOwnKeys:!0}),uo.extend(n,e,null,{allOwnKeys:!0}),n.create=function(e){return Zi(Di(t,e))},n}const Bi=Zi(Ci);Bi.Axios=Ni,Bi.CanceledError=Jo,Bi.CancelToken=Mi,Bi.isCancel=Ei,Bi.VERSION=Ai,Bi.toFormData=ko,Bi.AxiosError=fo,Bi.Cancel=Bi.CanceledError,Bi.all=function(t){return Promise.all(t)},Bi.spread=Ii,Bi.isAxiosError=Ui,Bi.formToJSON=t=>Vo(uo.isHTMLForm(t)?new FormData(t):t);var Fi=Bi;const{Axios:Vi,AxiosError:zi,CanceledError:qi,isCancel:Hi,CancelToken:Wi,VERSION:Yi,all:Xi,Cancel:Gi,isAxiosError:Ji,spread:Ki,toFormData:Qi}=Fi;var tr=Fi,er=n(1120);const nr=()=>localStorage.getItem("TOKEN"),or=tr.create({baseURL:"/api/v1",timeout:5e3});or.interceptors.request.use((t=>{const e=nr();return e&&(t.headers.Authorization=e),t})),or.interceptors.response.use((t=>(console.log(t),t)),(t=>(console.log(t),t.response&&401===t.response.status?er.Z.push({path:"/login",query:{redirect:er.Z.currentRoute.value.fullPath}}).then((()=>{})):t.response?.data.result||(t.response={data:{result:"0",message:"未知错误，请稍后重试"}}),t.response.data)));var ir=or,rr={addOrigin(t,e){return ir({url:"/designs",method:"POST",data:{title:t,project:e}})},getAllDesign(t){return ir({url:"/designs",method:"GET",params:{project:t}})},getSingleDesign(t,e){return ir({url:`/design/${e}`,method:"GET",params:{project:t}})},changeOriginName(t){return ir({url:"/design",method:"PATCH",data:{design:t}})},deleteOrigin(t){return ir({url:"/design",method:"DELETE",data:{design:t}})},saveOrigin(t,e,n){return ir({url:"/design-versions",method:"POST",data:{content:t,style:e,design:n}})},getPassed(t){return ir({url:`/design-versions/${t}`,method:"GET",data:{design:t}})}};console.log("mapState :>> ",(0,a.rn)(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]));var sr={components:{Preview:un},data(){return{isShowPreview:!1,timer:null,isScreenshot:!1,scale:100}},computed:(0,a.rn)(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created(){u.Z.$on("preview",this.preview),u.Z.$on("save",this.save),u.Z.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{handleScaleChange(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.scale=~~this.scale||1,pn(this.scale)}),1e3)},lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},compose(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo(){this.$store.commit("undo")},redo(){this.$store.commit("redo")},handleFileChange(t){const e=t.target.files[0];if(!e.type.includes("image"))return void(0,Zt.Z)("只能插入图片");const n=new FileReader;n.onload=t=>{const e=t.target.result,n=new Image;n.onload=()=>{const t={...rt.$Z,id:(0,Ut.Z)(),component:"Picture",label:"图片",icon:"",propValue:{url:e,flip:{horizontal:!1,vertical:!1}},style:{...rt.zH,top:0,left:0,width:n.width>1e3?.3*n.width:n.width<300?n.width:.5*n.width,height:n.width>1e3?.3*n.height:n.width<300?n.height:.5*n.height}};gn(t),this.$store.commit("addComponent",{component:t}),this.$store.commit("recordSnapshot"),(0,x.$)("#input").setAttribute("type","text"),(0,x.$)("#input").setAttribute("type","file")},n.src=e},n.readAsDataURL(e)},preview(t){this.isScreenshot=t,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},async save(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData));const t=location.search.slice(1).split("&"),e={};t.forEach((t=>{e[`${t.split("=")[0]}`]=t.split("=")[1]}));let n=e["design"];e["project"];await rr.saveOrigin(JSON.stringify(this.componentData),JSON.stringify(this.canvasStyleData),n);console.log("dist:designId",n),console.log("baocun ok!"),this.$message.success("保存成功")},clearCanvas(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange(){this.isShowPreview=!1,this.$store.commit("setEditMode","edit")}}},ar=sr,cr=(0,O.Z)(ar,Mt,It,!1,null,"e7a2a03c",null),lr=cr.exports,ur=n(9657),hr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"real-time-component-list"},t._l(t.componentData,(function(n,o){return e("div",{key:o,staticClass:"list",class:{actived:t.transformIndex(o)===t.curComponentIndex},on:{click:function(e){t.onClick(t.transformIndex(o))}}},[e("span",{staticClass:"iconfont",class:"icon-"+t.getComponent(o).icon}),e("span",{staticClass:"label"},[t._v(t._s(t.getComponent(o).label))]),e("div",{staticClass:"icon-container"},[e("span",{staticClass:"iconfont icon-shangyi",on:{click:function(e){t.upComponent(t.transformIndex(o))}}}),e("span",{staticClass:"iconfont icon-xiayi",on:{click:function(e){t.downComponent(t.transformIndex(o))}}}),e("span",{staticClass:"iconfont icon-shanchu",on:{click:function(e){t.deleteComponent(t.transformIndex(o))}}})])])})),0)},dr=[],mr={computed:(0,a.rn)(["componentData","curComponent","curComponentIndex"]),methods:{getComponent(t){return this.componentData[this.componentData.length-1-t]},transformIndex(t){return this.componentData.length-1-t},onClick(t){this.setCurComponent(t)},deleteComponent(){setTimeout((()=>{this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")}))},upComponent(){setTimeout((()=>{this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")}))},downComponent(){setTimeout((()=>{this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")}))},setCurComponent(t){this.$store.commit("setCurComponent",{component:this.componentData[t],index:t})}}},pr=mr,fr=(0,O.Z)(pr,hr,dr,!1,null,"3f5db1e1",null),gr=fr.exports,vr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"attr-container"},[e("p",{staticClass:"title"},[t._v("画布属性")]),e("el-form",{staticStyle:{padding:"20px"}},t._l(Object.keys(t.options),(function(n,o){return e("el-form-item",{key:o,attrs:{label:t.options[n]}},[t.isIncludesColor(n)?e("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.canvasStyleData[n],callback:function(e){t.$set(t.canvasStyleData,n,e)},expression:"canvasStyleData[key]"}}):e("el-input",{attrs:{type:"number"},model:{value:t.canvasStyleData[n],callback:function(e){t.$set(t.canvasStyleData,n,t._n(e))},expression:"canvasStyleData[key]"}})],1)})),1)],1)},yr=[],br={data(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:(0,a.rn)(["canvasStyleData"]),methods:{isIncludesColor(t){return t.toLowerCase().includes("color")}}},wr=br,Sr=(0,O.Z)(wr,vr,yr,!1,null,null,null),Cr=Sr.exports,xr=n(3703),Er={components:{Editor:nt,ComponentList:lt,AnimationList:Lt,EventList:jt,Toolbar:lr,RealTimeComponentList:gr,CanvasAttr:Cr},data(){return{comData:"",canData:"",activeName:"attr",reSelectAnimateIndex:void 0}},computed:(0,a.rn)(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created(){this.restore(),(0,ur.Y)()},methods:{restore(){this.comData&&((0,xr.o)(JSON.parse(this.comData)),this.$store.commit("setComponentData",JSON.parse(this.comData))),this.canData&&this.$store.commit("setCanvasStyle",JSON.parse(this.canData))},handleDrop(t){t.preventDefault(),t.stopPropagation();const e=t.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(e){const o=(0,x.p$)(rt.ZP[e]);o.style.top=t.clientY-n.y,o.style.left=t.clientX-n.x,o.id=(0,Ut.Z)(),gn(o),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown(t){t.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(t){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=t.button&&this.$store.commit("hideContextMenu")}},async mounted(){const t=location.search.slice(1).split("&"),e={};t.forEach((t=>{e[`${t.split("=")[0]}`]=t.split("=")[1]}));let n=e["design"],o=e["project"];console.log("@@@@@",n);const i=await rr.getSingleDesign(o,n);console.log(i),this.comData=i.data.data.content,this.canData=i.data.data.style,console.log("result.data",i.data),console.log("result.data.data",i.data.data),console.log("this.comData",this.comData),console.log("this.canData",this.canData),this.restore()}},kr=Er,Or=(0,O.Z)(kr,o,i,!1,null,null,null),Dr=Or.exports},6230:function(t){t.exports="object"==typeof self?self.FormData:window.FormData},6683:function(t,e,n){"use strict";n.d(e,{oQ:function(){return r},tA:function(){return i}});const o={redirect(t){t&&(window.location.href=t)},alert(t){t&&alert(t)}},i={methods:o},r=[{key:"redirect",label:"跳转事件",event:o.redirect,param:""},{key:"alert",label:"alert 事件",event:o.alert,param:""}]},3229:function(t,e,n){"use strict";async function o(t,e=[]){const n=e=>new Promise((n=>{const{animationTime:o,value:r="",isLoop:s}=e;t.style.setProperty("--time",o+"s"),t.classList.add(r,"animated",i(s));const a=()=>{t.removeEventListener("animationend",a),t.removeEventListener("animationcancel",a),t.classList.remove(r,"animated",i(s)),t.style.removeProperty("--time"),n()};t.addEventListener("animationend",a),t.addEventListener("animationcancel",a)}));for(let o=0,i=e.length;o<i;o++)await n(e[o])}function i(t){return t?"infinite":"no-infinite"}n.d(e,{Z:function(){return o}})},9657:function(t,e,n){"use strict";n.d(e,{Y:function(){return O},k:function(){return S}});var o=n(8867),i=n(4003);const r=17,s=91,a=86,c=67,l=88,u=89,h=90,d=71,m=66,p=76,f=85,g=83,v=80,y=68,b=46,w=69,S=[66,67,68,69,71,76,80,83,85,86,88,89,90],C={[a]:A,[u]:P,[h]:$,[g]:T,[v]:N,[w]:M},x={...C,[f]:U},E={...C,[c]:D,[l]:L,[d]:_,[m]:R,[y]:j,[b]:j,[p]:I};let k=!1;function O(){window.onkeydown=t=>{if(!o.Z.state.isInEdiotr)return;const{curComponent:e}=o.Z.state,{keyCode:n}=t;n===r||n===s?k=!0:n==b&&e?(o.Z.commit("deleteComponent"),o.Z.commit("recordSnapshot")):k&&(!E[n]||e&&e.isLock?x[n]&&e&&e.isLock&&(t.preventDefault(),x[n]()):(t.preventDefault(),E[n]()))},window.onkeyup=t=>{t.keyCode!==r&&t.keyCode!==s||(k=!1)},window.onmousedown=()=>{o.Z.commit("setInEditorStatus",!1)}}function D(){o.Z.commit("copy")}function A(){o.Z.commit("paste"),o.Z.commit("recordSnapshot")}function L(){o.Z.commit("cut")}function P(){o.Z.commit("redo")}function $(){o.Z.commit("undo")}function _(){o.Z.state.areaData.components.length&&(o.Z.commit("compose"),o.Z.commit("recordSnapshot"))}function R(){const t=o.Z.state.curComponent;t&&!t.isLock&&"Group"==t.component&&(o.Z.commit("decompose"),o.Z.commit("recordSnapshot"))}function T(){i.Z.$emit("save")}function N(){i.Z.$emit("preview")}function j(){o.Z.state.curComponent&&(o.Z.commit("deleteComponent"),o.Z.commit("recordSnapshot"))}function M(){i.Z.$emit("clearCanvas")}function I(){o.Z.commit("lock")}function U(){o.Z.commit("unlock")}}}]);
//# sourceMappingURL=628.7ef998e0.js.map