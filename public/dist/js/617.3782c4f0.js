(self["webpackChunkvisual_drag_demo"]=self["webpackChunkvisual_drag_demo"]||[]).push([[617],{5836:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"iframe-container"},[e("iframe",{attrs:{name:"myiframe",id:"myiframe",src:t.propValue.url,align:"center",frameborder:"0",allowfullscreen:""}},[e("p",[t._v("你的浏览器不支持iframe标签")])])])])},o=[],i={props:{propValue:{type:Object,require:!0,default:""},element:{type:Object,default:()=>{}}},methods:{}},s=i,l=n(3736),a=(0,l.Z)(s,r,o,!1,null,"1c68419f",null),u=a.exports},6069:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"circle-shape"},[e("v-text",{attrs:{"prop-value":t.element.propValue,element:t.element}})],1)},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:()=>{}}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"5da2fcda",null),c=u.exports},7119:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"group"},[e("div",t._l(t.propValue,(function(t){return e(t.component,{key:t.id,tag:"component",staticClass:"component",style:t.groupStyle,attrs:{id:"component"+t.id,"prop-value":t.propValue,element:t,request:t.request}})})),1)])},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:Array,default:()=>[]},element:{type:Object,default:()=>{}}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"7a8969d0",null),c=u.exports},896:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"line-shape"})},o=[],i=n(7414),s={extends:i.Z},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"30dba720",null),c=u.exports},9231:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{overflow:"hidden"}},[e("audio",{attrs:{id:"music",src:t.propValue.url,type:"audio/mp3",controls:""}})])},o=[],i={props:{propValue:{type:Object,require:!0,default:""},element:{type:Object,default:()=>{}}}},s=i,l=n(3736),a=(0,l.Z)(s,r,o,!1,null,"0dd3dfb1",null),u=a.exports},4401:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{overflow:"hidden"}},[e("canvas",{ref:"canvas"})])},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:Object,required:!0,default:()=>{}},element:{type:Object,default:()=>{}}},data(){return{width:0,height:0,img:null,canvas:null,ctx:null,isFirst:!0}},watch:{"element.style.width":function(){this.drawImage()},"element.style.height":function(){this.drawImage()},"propValue.flip.vertical":function(){this.mirrorFlip()},"propValue.flip.horizontal":function(){this.mirrorFlip()},"propValue.url":function(){this.drawImage()}},mounted(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.drawImage()},methods:{drawImage(){const{width:t,height:e}=this.element.style;this.canvas.width=t,this.canvas.height=e,this.isFirst?(this.isFirst=!1,this.img=document.createElement("img"),this.img.src=this.propValue.url,this.img.onload=()=>{this.ctx.drawImage(this.img,0,0,t,e),this.mirrorFlip()}):(this.img.src!=this.propValue.url&&(this.img.src=this.propValue.url),this.mirrorFlip())},mirrorFlip(){const{vertical:t,horizontal:e}=this.propValue.flip,{width:n,height:r}=this.element.style,o=e?-1:1,i=t?-1:1;this.ctx.clearRect(0,0,n,r),this.ctx.translate(n/2-n*o/2,r/2-r*i/2),this.ctx.scale(o,i),this.ctx.drawImage(this.img,0,0,n,r),this.ctx.setTransform(1,0,0,1,0,0)}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,null,null),c=u.exports},1837:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rect-shape"},[e("v-text",{attrs:{"prop-value":t.element.propValue,element:t.element}})],1)},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:()=>{}}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"08b08abf",null),c=u.exports},3143:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("button",{staticClass:"v-button"},[t._v(t._s(t.propValue))])},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:String,default:""},element:{type:Object,default:()=>{}}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"5ec15f7c",null),c=u.exports},3599:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var r=function(){var t=this,e=t._self._c;return e("table",{staticClass:"v-table"},[e("tbody",t._l(t.propValue.data,(function(n,r){return e("tr",{key:r,class:{stripe:t.propValue.stripe&&r%2,bold:t.propValue.thBold&&0===r}},t._l(n,(function(n,r){return e("td",{key:r},[t._v(t._s(n))])})),0)})),0)])},o=[],i=n(4471),s=n(7414),l={extends:s.Z,props:{propValue:{type:Object,default:()=>{}},request:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},data(){return{cancelRequest:null}},created(){this.request&&(this.cancelRequest=(0,i.ZP)(this.request,this.propValue,"data"))},beforeDestroy(){this.request&&this.cancelRequest()}},a=l,u=n(3736),c=(0,u.Z)(a,r,o,!1,null,"50adec07",null),p=c.exports},3362:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f}});var r=function(){var t=this,e=t._self._c;return"edit"==t.editMode?e("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[e("div",{ref:"text",class:{"can-edit":t.canEdit},style:{verticalAlign:t.element.style.verticalAlign},attrs:{contenteditable:t.canEdit,tabindex:"0"},domProps:{innerHTML:t._s(t.element.propValue)},on:{dblclick:t.setEdit,paste:t.clearStyle,mousedown:t.handleMousedown,blur:t.handleBlur,input:t.handleInput}})]):e("div",{staticClass:"v-text preview"},[e("div",{style:{verticalAlign:t.element.style.verticalAlign},domProps:{innerHTML:t._s(t.element.propValue)}})])},o=[],i=(n(6699),n(629)),s=n(9657),l=n(4471),a=n(7414),u=n(4003),c={extends:a.Z,props:{propValue:{type:String,required:!0,default:""},request:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}},linkage:{type:Object,default:()=>{}}},data(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1,cancelRequest:null}},computed:{...(0,i.rn)(["editMode","curComponent"])},created(){this.request&&(this.cancelRequest=(0,l.ZP)(this.request,this.element,"propValue","string")),u.Z.$on("componentClick",this.onComponentClick)},beforeDestroy(){this.request&&this.cancelRequest(),u.Z.$off("componentClick",this.onComponentClick)},methods:{onComponentClick(){this.curComponent.id!==this.element.id&&(this.canEdit=!1)},handleInput(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s.k.includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown(t){this.canEdit&&t.stopPropagation()},clearStyle(t){t.preventDefault();const e=t.clipboardData,n=e.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,t.target.innerHTML)},handleBlur(t){this.element.propValue=t.target.innerHTML||"&nbsp;";const e=t.target.innerHTML;""!==e?this.element.propValue=t.target.innerHTML:(this.element.propValue="",this.$nextTick((()=>{this.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText(t){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},p=c,d=n(3736),h=(0,d.Z)(p,r,o,!1,null,"2403393d",null),f=h.exports},1120:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{overflow:"hidden"}},[e("video",{staticStyle:{"object-fit":"fill"},attrs:{id:"video",src:t.propValue.url,type:"video/mp4",controls:"true",poster:""}})])},o=[],i={props:{propValue:{type:Object,require:!0,default:""},element:{type:Object,default:()=>{}}}},s=i,l=n(3736),a=(0,l.Z)(s,r,o,!1,null,"74735e23",null),u=a.exports},7414:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r,o,i=n(4003),s={props:{linkage:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},created(){this.linkage?.data?.length&&(i.Z.$on("v-click",this.onClick),i.Z.$on("v-hover",this.onHover))},mounted(){const{data:t,duration:e}=this.linkage||{};t?.length&&(this.$el.style.transition=`all ${e}s`)},beforeDestroy(){this.linkage?.data?.length&&(i.Z.$off("v-click",this.onClick),i.Z.$off("v-hover",this.onHover))},methods:{changeStyle(t=[]){t.forEach((t=>{t.style.forEach((t=>{t.key&&(this.element.style[t.key]=t.value)}))}))},onClick(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-click"===e.event));this.changeStyle(e)},onHover(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-hover"===e.event));this.changeStyle(e)}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,null,null),c=u.exports},2239:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"svg-star-container"},[e("svg",{attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"}},[e("polygon",{ref:"star",attrs:{points:t.points,stroke:t.element.style.borderColor,fill:t.element.style.backgroundColor,"stroke-width":"1"}})]),e("v-text",{attrs:{"prop-value":t.element.propValue,element:t.element}})],1)},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:()=>{}}},data(){return{points:""}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted(){this.draw()},methods:{draw(){const{width:t,height:e}=this.element.style;this.drawPolygon(t,e)},drawPolygon(t,e){const n=[[.5,0],[.625,.375],[1,.375],[.75,.625],[.875,1],[.5,.75],[.125,1],[.25,.625],[0,.375],[.375,.375]],r=n.map((n=>t*n[0]+" "+e*n[1]));this.points=r.toString()}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"341f7840",null),c=u.exports},5081:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"svg-triangle-container"},[e("svg",{attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"}},[e("polygon",{ref:"triangle",attrs:{points:t.points,stroke:t.element.style.borderColor,fill:t.element.style.backgroundColor,"stroke-width":"1"}})]),e("v-text",{attrs:{"prop-value":t.element.propValue,element:t.element}})],1)},o=[],i=n(7414),s={extends:i.Z,props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:()=>{}}},data(){return{points:""}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted(){this.draw()},methods:{draw(){const{width:t,height:e}=this.element.style;this.drawTriangle(t,e)},drawTriangle(t,e){const n=[[.5,.05],[1,.95],[0,.95]],r=n.map((n=>t*n[0]+" "+e*n[1]));this.points=r.toString()}}},l=s,a=n(3736),u=(0,a.Z)(l,r,o,!1,null,"6aec75f7",null),c=u.exports},4471:function(t,e,n){"use strict";n.d(e,{Ax:function(){return a},ZP:function(){return u},_q:function(){return o}});var r=n(4720);const o=/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;function i(t){return new Promise(((e,n)=>{const r=new XMLHttpRequest;r.timeout=6e3;let o=a(t.url);"GET"===t.method&&(o+=`${s(t.data)}`),r.open(t.method,o),r.ontimeout=n,r.onerror=n,r.onload=t=>{e(t.target.response)},r.send(JSON.stringify(l(t.data,t.paramType)))}))}function s(t){let e="";return t.forEach((t=>{t[0]&&(e+=`&${t[0]}=${t[1]}`)})),e?"?"+e:""}function l(t,e){if(!t)return"";if("array"===e)return t;const n={};return t.forEach((t=>{t[0]&&(n[t[0]]=t[1])})),n}function a(t){return t.startsWith("http")?t:"https://"+t}function u(t,e,n,s="object"){let l,u=0;const c=t?.url;return(c&&!/^\d+$/.test(c)||o.test(a(c)))&&(t.series?l=setInterval((()=>{0!=t.requestCount&&t.requestCount<=u?clearInterval(l):(u++,i(t,s).then((t=>{e[n]="object"===s||"array"===s?JSON.parse(t):t})).catch((t=>r.Message.error(t?.message||t))))}),t.time):i(t,s).then((t=>{e[n]="object"===s||"array"===s?JSON.parse(t):t})).catch((t=>r.Message.error(t?.message||t)))),function(){clearInterval(l)}}},9657:function(t,e,n){"use strict";n.d(e,{Y:function(){return _},k:function(){return Z}});var r=n(8867),o=n(4003);const i=17,s=91,l=86,a=67,u=88,c=89,p=90,d=71,h=66,f=76,m=85,v=83,y=80,g=68,w=46,C=69,Z=[66,67,68,69,71,76,80,83,85,86,88,89,90],b={[l]:q,[c]:j,[p]:E,[v]:M,[y]:D,[C]:I},k={...b,[m]:R},x={...b,[a]:S,[u]:O,[d]:T,[h]:$,[g]:P,[w]:P,[f]:L};let V=!1;function _(){window.onkeydown=t=>{if(!r.Z.state.isInEdiotr)return;const{curComponent:e}=r.Z.state,{keyCode:n}=t;n===i||n===s?V=!0:n==w&&e?(r.Z.commit("deleteComponent"),r.Z.commit("recordSnapshot")):V&&(!x[n]||e&&e.isLock?k[n]&&e&&e.isLock&&(t.preventDefault(),k[n]()):(t.preventDefault(),x[n]()))},window.onkeyup=t=>{t.keyCode!==i&&t.keyCode!==s||(V=!1)},window.onmousedown=()=>{r.Z.commit("setInEditorStatus",!1)}}function S(){r.Z.commit("copy")}function q(){r.Z.commit("paste"),r.Z.commit("recordSnapshot")}function O(){r.Z.commit("cut")}function j(){r.Z.commit("redo")}function E(){r.Z.commit("undo")}function T(){r.Z.state.areaData.components.length&&(r.Z.commit("compose"),r.Z.commit("recordSnapshot"))}function $(){const t=r.Z.state.curComponent;t&&!t.isLock&&"Group"==t.component&&(r.Z.commit("decompose"),r.Z.commit("recordSnapshot"))}function M(){o.Z.$emit("save")}function D(){o.Z.$emit("preview")}function P(){r.Z.state.curComponent&&(r.Z.commit("deleteComponent"),r.Z.commit("recordSnapshot"))}function I(){o.Z.$emit("clearCanvas")}function L(){r.Z.commit("lock")}function R(){r.Z.commit("unlock")}},5617:function(t,e,n){var r={"./Browser/Component":5836,"./CircleShape/Component":6069,"./Group/Component":7119,"./LineShape/Component":896,"./Music/Component":9231,"./Picture/Component":4401,"./RectShape/Component":1837,"./VButton/Component":3143,"./VTable/Component":3599,"./VText/Component":3362,"./Video/Component":1120,"./svgs/SVGStar/Component":2239,"./svgs/SVGTriangle/Component":5081};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=5617}}]);
//# sourceMappingURL=617.3782c4f0.js.map